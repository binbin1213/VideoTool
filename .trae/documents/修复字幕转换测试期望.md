## 问题定位

* 失败源：`src/renderer/utils/__tests__/subtitleConverter.test.ts:33`

* 现有规则：`src/shared/presets/subtitle-convert/regex-rules.json:51-56` 将英文标点 `,?!;'"{}` 全部替换为空格，导致：

  * `Hello, world!` → `Hello  world`（逗号与感叹号被移除，产生双空格）

* 测试期望错误：断言 `/Hello\s world!/` 假设感叹号保留且只有一个空格，与规则行为不一致。

## 修复方案

* 修改测试用例以匹配当前规则输出：

  * 将断言改为 `expect(ass).toMatch(/Dialogue:.*Hello\s\sworld/)` 或 `expect(ass).toContain('Hello  world')`

* 可选（若希望输出更整洁）：在生成 ASS 前对文本做清理（不改动规则），例如：

  * 在 `src/renderer/utils/subtitleConverter.ts` 的转换路径对 `text` 应用 `text.replace(/\s{2,}/g, ' ').trim()`；但该更改会影响实际输出，请仅在确认需要时实施。

## 验证步骤

1. 更**新测试断言使其与规则一致。**
2. **运行测试，确认 7 个用例全部通过。**

**是否按上述方案先调整测试断言（保持现有清洗规则不变）？**
