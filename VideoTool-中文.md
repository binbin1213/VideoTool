# VideoTool è§†é¢‘å¤„ç†è½¯ä»¶ - å®Œæ•´æŠ€æœ¯è§„æ ¼æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

VideoTool æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„è·¨å¹³å°è§†é¢‘å¤„ç†æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œæä¾›éŸ³è§†é¢‘åˆå¹¶ã€è§†é¢‘è½¬ç å‹ç¼©ã€å­—å¹•çƒ§å½•ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œä»¥åŠä¸°å¯Œçš„è§†é¢‘ç¼–è¾‘å·¥å…·ã€‚

**è®¾è®¡ç†å¿µ**ï¼šç®€å•æ˜“ç”¨ã€åŠŸèƒ½å¼ºå¤§ã€æ€§èƒ½ä¼˜å¼‚ã€å®Œå…¨æœ¬åœ°åŒ–å¤„ç†

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. éŸ³è§†é¢‘åˆå¹¶
- å°†éŸ³é¢‘å’Œè§†é¢‘æ–‡ä»¶åˆå¹¶ä¸ºå•ä¸ªè¾“å‡ºæ–‡ä»¶ï¼ˆæ”¯æŒMP4ã€MOVã€MKVç­‰ï¼‰
- **å†…ç½®é¢„è®¾**ï¼šé«˜è´¨é‡ã€å¿«é€Ÿå¤„ç†ã€å¹³è¡¡æ¨¡å¼ç­‰
- **è‡ªå®šä¹‰è®¾ç½®**ï¼š
  - è§†é¢‘ç¼–è§£ç å™¨ï¼ˆH.264ã€H.265ã€VP9ç­‰ï¼‰
  - éŸ³é¢‘ç¼–è§£ç å™¨ï¼ˆAACã€MP3ã€FLACç­‰ï¼‰
  - æ¯”ç‰¹ç‡ã€åˆ†è¾¨ç‡ã€å¸§ç‡æ§åˆ¶
  - éŸ³é¢‘é‡‡æ ·ç‡å’Œå£°é“é…ç½®
- **è®¾ç½®ç®¡ç†**ï¼šæ”¯æŒé¢„è®¾çš„å¯¼å…¥/å¯¼å‡ºï¼ˆJSONæ ¼å¼ï¼‰

### 2. è§†é¢‘è½¬ç å’Œå‹ç¼©
- **è¾“å…¥æ ¼å¼æ”¯æŒ**ï¼šMP4ã€AVIã€MKVã€MOVã€FLVã€WebMã€WMVã€MPEGç­‰
- **è¾“å‡ºæ ¼å¼æ”¯æŒ**ï¼šMP4ã€MOVã€MKVã€WebMã€AVIç­‰
- **å‹ç¼©é€‰é¡¹**ï¼š
  - åˆ†è¾¨ç‡è°ƒæ•´ï¼ˆ4Kã€1080pã€720pã€480pæˆ–è‡ªå®šä¹‰ï¼‰
  - æ¯”ç‰¹ç‡æ§åˆ¶ï¼ˆCBRã€VBRï¼‰
  - ç¼–ç è´¨é‡é¢„è®¾ï¼ˆCRFå€¼æ§åˆ¶ï¼‰
  - ç›®æ ‡æ–‡ä»¶å¤§å°è®¾ç½®ï¼ˆè‡ªåŠ¨è®¡ç®—å‚æ•°ï¼‰
- **æ™ºèƒ½å‹ç¼©**ï¼šAIåˆ†ææ¨èæœ€ä½³å‹ç¼©å‚æ•°
- **é¢„è®¾å’Œè‡ªå®šä¹‰è®¾ç½®**ï¼šJSONå¯¼å…¥/å¯¼å‡º

### 3. å­—å¹•çƒ§å½•/å°è£… â­ v1.1.0 é‡å¤§å‡çº§

#### 3.1 ç¡¬å­—å¹•æ¨¡å¼ï¼ˆçƒ§å½•ï¼‰
- **æ”¯æŒæ ¼å¼**ï¼šSRTã€ASSã€SSAã€VTT
- **å­—å¹•æ ·å¼è‡ªå®šä¹‰**ï¼š
  - å­—ä½“é€‰æ‹©å’Œå¤§å°
  - é¢œè‰²å’Œæè¾¹
  - ä½ç½®å’Œå¯¹é½æ–¹å¼
  - é˜´å½±å’ŒèƒŒæ™¯
- **é«˜çº§åŠŸèƒ½**ï¼š
  - è´¨é‡é¢„è®¾ï¼ˆH.264é«˜è´¨é‡/å¹³è¡¡/ç¡¬ä»¶åŠ é€Ÿï¼ŒH.265å°ä½“ç§¯ï¼‰
  - CRF è´¨é‡æ§åˆ¶ï¼ˆ18-28ï¼‰
  - ç¼–ç é€Ÿåº¦é¢„è®¾ï¼ˆultrafast ~ veryslowï¼‰
  - ç¡¬ä»¶åŠ é€Ÿæ”¯æŒï¼ˆVideoToolbox/NVENC/QSVï¼‰
- **ç‰¹ç‚¹**ï¼š
  - å­—å¹•æ°¸ä¹…åµŒå…¥è§†é¢‘ç”»é¢
  - ä¸å¯å…³é—­æˆ–åˆ‡æ¢
  - éœ€è¦é‡æ–°ç¼–ç è§†é¢‘
  - è¾“å‡ºä¸º MP4 æ ¼å¼

#### 3.2 è½¯å­—å¹•æ¨¡å¼ï¼ˆå°è£…ï¼‰â­ æ–°å¢
- **æ”¯æŒæ ¼å¼**ï¼šSRTã€ASS
- **å¤šè½¨é“æ”¯æŒ**ï¼š
  - åŒæ—¶é€‰æ‹©å¤šä¸ªå­—å¹•æ–‡ä»¶
  - æ— æ•°é‡é™åˆ¶
  - è‡ªåŠ¨è¯†åˆ«è¯­è¨€ä»£ç ï¼ˆä»æ–‡ä»¶åï¼‰
  - è‡ªåŠ¨è®¾ç½®å…ƒæ•°æ®ï¼ˆè¯­è¨€æ ‡ç­¾å’Œæ˜¾ç¤ºåç§°ï¼‰
- **æ”¯æŒçš„è¯­è¨€ä»£ç **ï¼š
  - `zh-Hans` (ç®€ä½“ä¸­æ–‡)
  - `zh-Hant` (ç¹ä½“ä¸­æ–‡)
  - `en` (è‹±è¯­)
  - `ja` (æ—¥è¯­)
  - `ko` (éŸ©è¯­)
  - `es` (è¥¿ç­ç‰™è¯­)
  - `fr` (æ³•è¯­)
  - `de` (å¾·è¯­)
  - `pt` (è‘¡è„ç‰™è¯­)
  - `th` (æ³°è¯­)
  - `vi` (è¶Šå—è¯­)
  - `id` (å°å°¼è¯­)
  - `hi` (å°åœ°è¯­)
- **æ–‡ä»¶å‘½åæ ¼å¼**ï¼š`è§†é¢‘åç§°.è¯­è¨€ä»£ç .srt`ï¼ˆå¦‚ï¼š`video.zh-Hans.srt`ï¼‰
- **ç‰¹ç‚¹**ï¼š
  - å­—å¹•ä½œä¸ºç‹¬ç«‹è½¨é“ï¼Œæ’­æ”¾å™¨å¯å¼€å…³
  - è§†é¢‘å’ŒéŸ³é¢‘ç›´æ¥å¤åˆ¶ï¼Œæ— éœ€é‡æ–°ç¼–ç 
  - å¤„ç†é€Ÿåº¦æå¿«
  - è¾“å‡ºä¸º MKV æ ¼å¼
  - æ”¯æŒå¤šè¯­è¨€å­—å¹•è½¨é“

### 4. å­—å¹•æ ¼å¼è½¬æ¢ â­ v1.1.0 é‡å¤§å‡çº§

#### 4.1 SRTè½¬ASSè½¬æ¢å™¨

**æ ¸å¿ƒæµç¨‹**ï¼š
```
SRTæ–‡ä»¶ â†’ æ­£åˆ™é¢„å¤„ç† â†’ è§£æSRT â†’ åº”ç”¨ASSæ ·å¼ â†’ æ·»åŠ æ°´å°ï¼ˆå¯é€‰ï¼‰ â†’ ç”ŸæˆASSæ–‡ä»¶
```

**v1.1.0 æ–°å¢åŠŸèƒ½**ï¼š
- âœ¨ **æ‰¹é‡è½¬æ¢**: ä¸€æ¬¡é€‰æ‹©å¤šä¸ªSRTæ–‡ä»¶æ‰¹é‡è½¬æ¢
- ğŸ¨ **æ ·å¼ç¼–è¾‘å™¨**: å¯è§†åŒ–ç¼–è¾‘ASSæ ·å¼å‚æ•°
- ğŸ‘ï¸ **å®æ—¶é¢„è§ˆ**: é¢„è§ˆæ ·å¼æ•ˆæœå’Œæ°´å°ä½ç½®
- ğŸ’¾ **è‡ªå®šä¹‰é¢„è®¾**: ä¿å­˜å’Œç®¡ç†è‡ªå®šä¹‰æ ·å¼
- ğŸ”– **å­—å¹•æ°´å°**: æ·»åŠ æ–‡å­—æ°´å°åˆ°å­—å¹•ä¸­

**åŠŸèƒ½ç‰¹æ€§**ï¼š

##### æ­£åˆ™æ›¿æ¢é¢„å¤„ç†
åœ¨è½¬æ¢å‰å¿…é¡»åº”ç”¨ä»¥ä¸‹æ­£åˆ™æ›¿æ¢è§„åˆ™ï¼ˆæŒ‰é¡ºåºæ‰§è¡Œï¼‰ï¼š

| åºå· | æ­£åˆ™è¡¨è¾¾å¼ | æ›¿æ¢ä¸º | è¯´æ˜ |
|------|-----------|--------|------|
| 1 | `</?i>` | ç©ºå­—ç¬¦ä¸² | ç§»é™¤æ–œä½“æ ‡ç­¾`<i>`å’Œ`</i>` |
| 2 | `[""]+` | ç©ºå­—ç¬¦ä¸² | ç§»é™¤ä¸­æ–‡å¼•å·"" |
| 3 | `\s*[ï¼Œã€‚ï¼›ã€~Â·ï¼Ÿï¼ï¿¥â€”]+\s*` | ä¸€ä¸ªç©ºæ ¼ | æ›¿æ¢ä¸­æ–‡æ ‡ç‚¹ç¬¦å·ï¼ˆé€—å·ã€å¥å·ã€åˆ†å·ç­‰ï¼‰ |
| 4 | `(?<!^)\s*-\s*` | ç©ºæ ¼+`-` | æ ¼å¼åŒ–éå¼€å¤´ä½ç½®çš„è¿å­—ç¬¦ï¼Œç§»é™¤å¤šä½™ç©ºæ ¼ |
| 5 | `^\s*-\s*` | `-` | æ ¼å¼åŒ–å¼€å¤´çš„è¿å­—ç¬¦ |
| 6 | `[,?!;'"{}]+` | ä¸€ä¸ªç©ºæ ¼ | æ›¿æ¢è‹±æ–‡æ ‡ç‚¹ç¬¦å· |
| 7 | `(^\s+)\|(\s+$)` | ç©ºå­—ç¬¦ä¸² | ç§»é™¤å­—å¹•æ–‡æœ¬å¼€å¤´å’Œç»“å°¾çš„æ‰€æœ‰ç©ºæ ¼ |

**å¤„ç†ç¤ºä¾‹**ï¼š
```
åŸå§‹æ–‡æœ¬: "  ä½ å¥½ï¼Œä¸–ç•Œï¼è¿™æ˜¯ä¸€æ®µ<i>æµ‹è¯•</i>å­—å¹•ã€‚  "
å¤„ç†å:   "ä½ å¥½ ä¸–ç•Œ è¿™æ˜¯ä¸€æ®µæµ‹è¯•å­—å¹• "
```

##### ASSæ ·å¼æ¨¡æ¿ç³»ç»Ÿ

**å†…ç½®æ ·å¼æ¨¡æ¿**ï¼ˆåŸºäºæä¾›çš„å­—å¹•æ ·å¼.txtï¼‰ï¼š

1. **åŒè¯­ åŸæ–‡**
   - å­—ä½“ï¼šå¾®è½¯é›…é»‘ï¼Œ14å·
   - é¢œè‰²ï¼šç™½è‰² (#FFFFFF)
   - æè¾¹ï¼š0.5åƒç´ 
   - ä½ç½®ï¼šåº•éƒ¨å±…ä¸­
   - ç”¨é€”ï¼šåŒè¯­å­—å¹•çš„åŸæ–‡éƒ¨åˆ†

2. **åŒè¯­ è¯‘æ–‡**
   - å­—ä½“ï¼šMicrosoft YaHeiï¼Œ18å·ï¼ŒåŠ ç²—
   - é¢œè‰²ï¼šç™½è‰² (#FFFFFF)
   - æè¾¹ï¼š0.5åƒç´ 
   - ä½ç½®ï¼šåº•éƒ¨å±…ä¸­
   - ç”¨é€”ï¼šåŒè¯­å­—å¹•çš„è¯‘æ–‡éƒ¨åˆ†

3. **åŒè¯­ æ­Œè¯ ç™½è‰²**
   - å­—ä½“ï¼šå¾®è½¯é›…é»‘ï¼Œ10å·ï¼ŒåŠ ç²—æ–œä½“
   - é¢œè‰²ï¼šç™½è‰² (#FFFFFF)
   - å¯¹é½ï¼šå±…ä¸­åä¸Š
   - ç”¨é€”ï¼šæ­Œè¯å­—å¹•

4. **æ­Œè¯ é¡¶éƒ¨ è“è‰²**
   - å­—ä½“ï¼šMicrosoft YaHeiï¼Œ15å·ï¼ŒåŠ ç²—
   - é¢œè‰²ï¼šæ©™è“è‰² (#FFAA55)
   - ä½ç½®ï¼šé¡¶éƒ¨å±…ä¸­
   - ç”¨é€”ï¼šé¡¶éƒ¨æ­Œè¯æ˜¾ç¤º

5. **è¯‘æ–‡å­—å¹• åº•éƒ¨**
   - å­—ä½“ï¼šMicrosoft YaHeiï¼Œ18å·ï¼ŒåŠ ç²—
   - é¢œè‰²ï¼šç™½è‰² (#FFFFFF)
   - ä½ç½®ï¼šåº•éƒ¨ï¼Œè¾¹è·10
   - ç”¨é€”ï¼šå¸¸è§„è¯‘æ–‡å­—å¹•

6. **è¯‘æ–‡å­—å¹• é¡¶éƒ¨**
   - å­—ä½“ï¼šMicrosoft YaHeiï¼Œ18å·ï¼ŒåŠ ç²—
   - é¢œè‰²ï¼šç™½è‰² (#FFFFFF)
   - ä½ç½®ï¼šé¡¶éƒ¨ï¼Œè¾¹è·10
   - ç”¨é€”ï¼šé¡¶éƒ¨è¯‘æ–‡å­—å¹•

7. **è¯‘æ–‡å­—å¹• è´´åº•**
   - å­—ä½“ï¼šMicrosoft YaHeiï¼Œ18å·ï¼ŒåŠ ç²—
   - é¢œè‰²ï¼šç™½è‰² (#FFFFFF)
   - ä½ç½®ï¼šè´´åº•ï¼ˆè¾¹è·0ï¼‰
   - ç”¨é€”ï¼šç´§è´´åº•éƒ¨çš„å­—å¹•

8. **æ¼”èŒäººå‘˜ å·¦/å³**
   - å­—ä½“ï¼šMicrosoft YaHeiï¼Œ13å·ï¼ŒåŠ ç²—
   - é¢œè‰²ï¼šç™½è‰² (#FFFFFF)
   - å¯¹é½ï¼šå·¦å¯¹é½/å³å¯¹é½
   - ç”¨é€”ï¼šç‰‡å¤´ç‰‡å°¾æ¼”èŒäººå‘˜åå•

9. **æ³¨ åº•éƒ¨/é¡¶éƒ¨/è´´åº•**
   - å­—ä½“ï¼šMicrosoft YaHeiï¼Œ13å·ï¼ŒåŠ ç²—
   - é¢œè‰²ï¼šç™½è‰² (#FFFFFF)
   - ä½ç½®ï¼šåº•éƒ¨/é¡¶éƒ¨/è´´åº•
   - ç”¨é€”ï¼šæ³¨é‡Šè¯´æ˜æ–‡å­—

**å®Œæ•´ASSæ ·å¼å®šä¹‰**ï¼š
```ass
[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding, LineSpacing

Style: åŒè¯­ åŸæ–‡,å¾®è½¯é›…é»‘,14,&H00FFFFFF,&H004E4E4E,&H00000000,&H00000000,0,0,0,0,100,100,0,0,1,0.5,0,2,5,5,3,1,0
Style: åŒè¯­ è¯‘æ–‡,Microsoft YaHei,18,&H00FFFFFF,&H004E4E4E,&H00000000,&H00000000,1,0,0,0,100,100,1,0,1,0.5,0,2,5,5,3,1,0
Style: åŒè¯­ æ­Œè¯ ç™½è‰²,å¾®è½¯é›…é»‘,10,&H00FFFFFF,&H004E4E4E,&H00000000,&H00000000,1,1,0,0,100,100,0,0,1,0.5,0,7,10,10,10,1,0
Style: æ­Œè¯ é¡¶éƒ¨ è“è‰²,Microsoft YaHei,15,&H00FFAA55,&H000000FF,&H00000000,&H00000000,1,0,0,0,100,100,1,0,1,0.5,0,8,5,5,10,1,0
Style: è¯‘æ–‡å­—å¹• åº•éƒ¨,Microsoft YaHei,18,&H00FFFFFF,&H00535353,&H00000000,&H00000000,1,0,0,0,100,100,1,0,1,0.5,0,2,5,5,10,1,1
Style: è¯‘æ–‡å­—å¹• é¡¶éƒ¨,Microsoft YaHei,18,&H00FFFFFF,&H00535353,&H00000000,&H00000000,1,0,0,0,100,100,1,0,1,0.5,0,8,5,5,10,1,1
Style: è¯‘æ–‡å­—å¹• è´´åº•,Microsoft YaHei,18,&H00FFFFFF,&H00535353,&H00000000,&H00000000,1,0,0,0,100,100,1,0,1,0.5,0,2,5,5,0,1,1
Style: æ¼”èŒäººå‘˜ å³,Microsoft YaHei,13,&H00FFFFFF,&H00535353,&H00000000,&H00000000,1,0,0,0,100,100,1,0,1,0.5,0,3,0,15,10,1,1
Style: æ¼”èŒäººå‘˜ å·¦,Microsoft YaHei,13,&H00FFFFFF,&H00535353,&H00000000,&H00000000,1,0,0,0,100,100,1,0,1,0.5,0,1,15,0,10,1,1
Style: æ³¨ åº•éƒ¨,Microsoft YaHei,13,&H00FFFFFF,&H00535353,&H00000000,&H00000000,1,0,0,0,100,100,1,0,1,0.5,0,2,5,5,10,1,1
Style: æ³¨ é¡¶éƒ¨,Microsoft YaHei,13,&H00FFFFFF,&H00535353,&H00000000,&H00000000,1,0,0,0,100,100,1,0,1,0.5,0,8,5,5,10,1,1
Style: æ³¨ è´´åº•,Microsoft YaHei,13,&H00FFFFFF,&H00535353,&H00000000,&H00000000,1,0,0,0,100,100,1,0,1,0.5,0,2,5,5,0,1,1
```

##### ç”¨æˆ·ç•Œé¢åŠŸèƒ½

1. **æ­£åˆ™è§„åˆ™ç®¡ç†**
   - å†…ç½®é»˜è®¤è§„åˆ™ï¼ˆä¸Šè¿°7æ¡è§„åˆ™ï¼‰
   - æ”¯æŒè‡ªå®šä¹‰æ·»åŠ /ç¼–è¾‘/åˆ é™¤è§„åˆ™
   - è§„åˆ™å¯ç”¨/ç¦ç”¨å¼€å…³
   - è§„åˆ™ä¼˜å…ˆçº§è°ƒæ•´ï¼ˆæ‹–æ‹½æ’åºï¼‰
   - è§„åˆ™å¯¼å…¥/å¯¼å‡ºï¼ˆJSONæ ¼å¼ï¼‰
   - æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•å™¨ï¼ˆå®æ—¶æµ‹è¯•ï¼‰

2. **æ ·å¼é€‰æ‹©å™¨**
   - ä¸‹æ‹‰èœå•é€‰æ‹©é»˜è®¤æ ·å¼
   - æ”¯æŒå¤šæ ·å¼é€‰æ‹©ï¼ˆä¸ºä¸åŒç±»å‹å­—å¹•åº”ç”¨ä¸åŒæ ·å¼ï¼‰
   - æ ·å¼é¢„è§ˆçª—å£
   - è‡ªå®šä¹‰æ ·å¼ç¼–è¾‘å™¨
   - æ ·å¼æ¨¡æ¿å¯¼å…¥ï¼ˆæ”¯æŒå¯¼å…¥.assæ ·å¼æ–‡ä»¶ï¼‰

3. **è½¬æ¢é¢„è§ˆ**
   - å®æ—¶é¢„è§ˆè½¬æ¢åæ•ˆæœ
   - å¯¹æ¯”è§†å›¾ï¼ˆSRTåŸæ–‡ vs ASSæ•ˆæœï¼‰
   - æ”¯æŒé€æ¡é¢„è§ˆ
   - æ—¶é—´è½´å¯è§†åŒ–

4. **æ‰¹é‡è½¬æ¢**
   - æ‰¹é‡å¯¼å…¥å¤šä¸ªSRTæ–‡ä»¶
   - ç»Ÿä¸€åº”ç”¨ç›¸åŒè§„åˆ™å’Œæ ·å¼
   - è¿›åº¦æ˜¾ç¤º
   - é”™è¯¯æŠ¥å‘Š

5. **é«˜çº§é€‰é¡¹**
   - å­—ç¬¦ç¼–ç é€‰æ‹©ï¼ˆUTF-8ã€GBKã€GB2312ç­‰ï¼‰
   - åˆ†è¾¨ç‡è®¾ç½®ï¼ˆPlayResX/PlayResYï¼‰
   - æ—¶é—´åç§»è°ƒæ•´
   - è¾“å‡ºæ–‡ä»¶å‘½åè§„åˆ™

#### 4.2 è½¬æ¢å·¥ä½œæµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. é€‰æ‹©SRTæ–‡ä»¶                      â”‚
â”‚     - å•ä¸ªæ–‡ä»¶                       â”‚
â”‚     - æ‰¹é‡æ–‡ä»¶                       â”‚
â”‚     - æ‹–æ‹½ä¸Šä¼                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. é…ç½®æ­£åˆ™æ›¿æ¢è§„åˆ™                 â”‚
â”‚     - ä½¿ç”¨é»˜è®¤è§„åˆ™                   â”‚
â”‚     - è‡ªå®šä¹‰è§„åˆ™                     â”‚
â”‚     - å¯ç”¨/ç¦ç”¨ç‰¹å®šè§„åˆ™              â”‚
â”‚     - å®æ—¶é¢„è§ˆæ›¿æ¢æ•ˆæœ               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. é€‰æ‹©ASSæ ·å¼                      â”‚
â”‚     - ä»é¢„è®¾æ ·å¼ä¸­é€‰æ‹©               â”‚
â”‚     - å¯¼å…¥è‡ªå®šä¹‰æ ·å¼æ¨¡æ¿             â”‚
â”‚     - ç¼–è¾‘æ ·å¼å‚æ•°                   â”‚
â”‚     - é¢„è§ˆæ ·å¼æ•ˆæœ                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. é«˜çº§è®¾ç½®ï¼ˆå¯é€‰ï¼‰                 â”‚
â”‚     - å­—ç¬¦ç¼–ç                        â”‚
â”‚     - è§†é¢‘åˆ†è¾¨ç‡                     â”‚
â”‚     - æ—¶é—´åç§»                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. é¢„è§ˆå’Œç¡®è®¤                       â”‚
â”‚     - æŸ¥çœ‹è½¬æ¢é¢„è§ˆ                   â”‚
â”‚     - å¯¹æ¯”åŸå§‹å’Œå¤„ç†å               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6. æ‰§è¡Œè½¬æ¢                         â”‚
â”‚     - æ˜¾ç¤ºè¿›åº¦                       â”‚
â”‚     - é”™è¯¯å¤„ç†                       â”‚
â”‚     - ç”ŸæˆASSæ–‡ä»¶                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  7. å®Œæˆ                             â”‚
â”‚     - æ‰“å¼€è¾“å‡ºæ–‡ä»¶å¤¹                 â”‚
â”‚     - æŸ¥çœ‹è½¬æ¢æ—¥å¿—                   â”‚
â”‚     - ç»§ç»­è½¬æ¢å…¶ä»–æ–‡ä»¶               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.3 æŠ€æœ¯å®ç°è¦ç‚¹

**æ­£åˆ™æ›¿æ¢å¼•æ“**ï¼š
```typescript
interface RegexRule {
  id: string;
  name: string;
  pattern: string;        // æ­£åˆ™è¡¨è¾¾å¼
  replacement: string;    // æ›¿æ¢æ–‡æœ¬
  description: string;    // è§„åˆ™è¯´æ˜
  enabled: boolean;       // æ˜¯å¦å¯ç”¨
  order: number;          // æ‰§è¡Œé¡ºåº
}

class RegexProcessor {
  private rules: RegexRule[];
  
  // åº”ç”¨æ‰€æœ‰å¯ç”¨çš„è§„åˆ™
  applyRules(text: string): string {
    let result = text;
    const enabledRules = this.rules
      .filter(r => r.enabled)
      .sort((a, b) => a.order - b.order);
    
    for (const rule of enabledRules) {
      const regex = new RegExp(rule.pattern, 'g');
      result = result.replace(regex, rule.replacement);
    }
    
    return result;
  }
  
  // æµ‹è¯•å•ä¸ªè§„åˆ™
  testRule(text: string, rule: RegexRule): string {
    const regex = new RegExp(rule.pattern, 'g');
    return text.replace(regex, rule.replacement);
  }
}
```

**SRTè§£æå™¨**ï¼š
```typescript
interface SRTSubtitle {
  index: number;
  startTime: string;  // "00:00:00,000"
  endTime: string;    // "00:00:06,800"
  text: string;       // å­—å¹•æ–‡æœ¬
}

class SRTParser {
  parse(srtContent: string): SRTSubtitle[] {
    // è§£æSRTæ ¼å¼
    // è¿”å›å­—å¹•æ•°ç»„
  }
}
```

**ASSç”Ÿæˆå™¨**ï¼š
```typescript
interface ASSStyle {
  name: string;
  fontname: string;
  fontsize: number;
  primaryColour: string;
  secondaryColour: string;
  outlineColour: string;
  backColour: string;
  bold: number;
  italic: number;
  // ... å…¶ä»–æ ·å¼å±æ€§
}

class ASSGenerator {
  private styles: ASSStyle[];
  
  generate(
    subtitles: SRTSubtitle[], 
    selectedStyle: string,
    options: ASSOptions
  ): string {
    // ç”ŸæˆASSæ–‡ä»¶å†…å®¹
    // åŒ…å«ï¼š[Script Info], [V4+ Styles], [Events]
  }
}
```

**å®Œæ•´è½¬æ¢æµç¨‹**ï¼š
```typescript
class SubtitleConverter {
  async convertSrtToAss(
    srtFilePath: string,
    assFilePath: string,
    options: ConvertOptions
  ): Promise<void> {
    // 1. è¯»å–SRTæ–‡ä»¶
    const srtContent = await fs.readFile(srtFilePath, options.encoding);
    
    // 2. åº”ç”¨æ­£åˆ™æ›¿æ¢
    const processor = new RegexProcessor(options.regexRules);
    const processedContent = this.processSubtitles(srtContent, processor);
    
    // 3. è§£æSRT
    const parser = new SRTParser();
    const subtitles = parser.parse(processedContent);
    
    // 4. ç”ŸæˆASS
    const generator = new ASSGenerator(options.styles);
    const assContent = generator.generate(
      subtitles, 
      options.selectedStyle,
      options.assOptions
    );
    
    // 5. ä¿å­˜ASSæ–‡ä»¶
    await fs.writeFile(assFilePath, assContent, 'utf-8');
  }
  
  private processSubtitles(
    content: string, 
    processor: RegexProcessor
  ): string {
    // æŒ‰å­—å¹•æ¡ç›®åˆ†å‰²
    const entries = content.split(/\n\n+/);
    
    return entries.map(entry => {
      const lines = entry.split('\n');
      if (lines.length >= 3) {
        // å¤„ç†å­—å¹•æ–‡æœ¬ï¼ˆç¬¬3è¡Œå¼€å§‹ï¼‰
        const textLines = lines.slice(2);
        const processedText = textLines
          .map(line => processor.applyRules(line))
          .join('\n');
        
        return [...lines.slice(0, 2), processedText].join('\n');
      }
      return entry;
    }).join('\n\n');
  }
}
```

#### 4.4 é…ç½®æ–‡ä»¶æ ¼å¼

**æ­£åˆ™è§„åˆ™é…ç½®ï¼ˆregex-rules.jsonï¼‰**ï¼š
```json
{
  "version": "1.0",
  "rules": [
    {
      "id": "rule-001",
      "name": "ç§»é™¤æ–œä½“æ ‡ç­¾",
      "pattern": "</?i>",
      "replacement": "",
      "description": "ç”¨äºæ›¿æ¢<i>å’Œ</i>",
      "enabled": true,
      "order": 1
    },
    {
      "id": "rule-002",
      "name": "ç§»é™¤ä¸­æ–‡å¼•å·",
      "pattern": "[\"\"]+",
      "replacement": "",
      "description": "ç”¨äºæ›¿æ¢""ä¸­æ–‡æ ‡ç‚¹",
      "enabled": true,
      "order": 2
    },
    {
      "id": "rule-003",
      "name": "æ›¿æ¢ä¸­æ–‡æ ‡ç‚¹",
      "pattern": "\\s*[ï¼Œã€‚ï¼›ã€~Â·ï¼Ÿï¼ï¿¥â€”]+\\s*",
      "replacement": " ",
      "description": "ç”¨äºæ›¿æ¢ä¸­æ–‡æ ‡ç‚¹ç¬¦å·",
      "enabled": true,
      "order": 3
    },
    {
      "id": "rule-004",
      "name": "æ ¼å¼åŒ–è¿å­—ç¬¦ï¼ˆéå¼€å¤´ï¼‰",
      "pattern": "(?<!^)\\s*-\\s*",
      "replacement": " -",
      "description": "ç”¨äºæ›¿æ¢ä¸åœ¨å¼€å¤´çš„-ä¸­çš„å¤šä½™ç©ºæ ¼",
      "enabled": true,
      "order": 4
    },
    {
      "id": "rule-005",
      "name": "æ ¼å¼åŒ–è¿å­—ç¬¦ï¼ˆå¼€å¤´ï¼‰",
      "pattern": "^\\s*-\\s*",
      "replacement": "-",
      "description": "ç”¨äºæ ¼å¼åŒ–åœ¨å¼€å¤´çš„-",
      "enabled": true,
      "order": 5
    },
    {
      "id": "rule-006",
      "name": "æ›¿æ¢è‹±æ–‡æ ‡ç‚¹",
      "pattern": "[,?!;'\"{}]+",
      "replacement": " ",
      "description": "ç”¨äºæ›¿æ¢è‹±æ–‡æ ‡ç‚¹",
      "enabled": true,
      "order": 6
    },
    {
      "id": "rule-007",
      "name": "æ¸…ç†é¦–å°¾ç©ºæ ¼",
      "pattern": "(^\\s+)|(\\s+$)",
      "replacement": "",
      "description": "ç”¨äºå»é™¤å­—å¹•å¼€å¤´å’Œç»“å°¾çš„æ‰€æœ‰ç©ºæ ¼",
      "enabled": true,
      "order": 7
    }
  ]
}
```

**è½¬æ¢é…ç½®ç¤ºä¾‹ï¼ˆconvert-config.jsonï¼‰**ï¼š
```json
{
  "encoding": "utf-8",
  "defaultStyle": "è¯‘æ–‡å­—å¹• åº•éƒ¨",
  "resolution": {
    "width": 384,
    "height": 288
  },
  "timeOffset": 0,
  "outputNaming": "{filename}.ass",
  "applyRegexRules": true,
  "regexRulesFile": "./regex-rules.json",
  "styleTemplateFile": "./å­—å¹•æ ·å¼.txt"
}
```

### 5. æ‰¹é‡å¤„ç† â­ æ–°å¢
- æ‰¹é‡å¯¼å…¥å¤šä¸ªæ–‡ä»¶
- é˜Ÿåˆ—ç®¡ç†ç³»ç»Ÿ
  - æŸ¥çœ‹ã€æ·»åŠ ã€åˆ é™¤ä»»åŠ¡
  - æš‚åœã€æ¢å¤ã€å–æ¶ˆä»»åŠ¡
  - ä»»åŠ¡ä¼˜å…ˆçº§è°ƒæ•´
- æ‰¹é‡åº”ç”¨ç›¸åŒè®¾ç½®
- å¹¶è¡Œå¤„ç†ï¼ˆå¤šä»»åŠ¡åŒæ—¶è¿›è¡Œï¼‰

### 5. è§†é¢‘ç¼–è¾‘å·¥å…· â­ æ–°å¢

#### 5.1 è§†é¢‘è£å‰ª/å‰ªè¾‘
- ç²¾ç¡®æ—¶é—´æ®µé€‰æ‹©
- æ—¶é—´è½´å¯è§†åŒ–ç¼–è¾‘
- å¤šæ®µå‰ªè¾‘åˆå¹¶
- å…³é”®å¸§é¢„è§ˆ

#### 5.2 è§†é¢‘æ—‹è½¬/ç¿»è½¬
- 90Â°ã€180Â°ã€270Â°æ—‹è½¬
- æ°´å¹³/å‚ç›´ç¿»è½¬
- è‡ªåŠ¨è°ƒæ•´åˆ†è¾¨ç‡

#### 5.3 æ·»åŠ æ°´å°
- å›¾ç‰‡æ°´å°ï¼ˆPNGã€JPGæ”¯æŒé€æ˜åº¦ï¼‰
- æ–‡å­—æ°´å°ï¼ˆè‡ªå®šä¹‰å­—ä½“ã€é¢œè‰²ã€é€æ˜åº¦ï¼‰
- ä½ç½®å’Œå¤§å°è°ƒæ•´
- æ—¶é—´èŒƒå›´æ§åˆ¶ï¼ˆå…¨ç¨‹æˆ–æŒ‡å®šæ—¶é—´æ®µï¼‰

#### 5.4 éŸ³é¢‘å¤„ç†
- ä»è§†é¢‘æå–éŸ³é¢‘
- éŸ³é¢‘æ›¿æ¢
- éŸ³é‡è°ƒèŠ‚å’Œæ·¡å…¥æ·¡å‡º
- éŸ³é¢‘æ ¼å¼è½¬æ¢ï¼ˆMP3ã€AACã€FLACã€WAVã€OGGï¼‰

#### 5.5 è§†é¢‘åˆ†å‰²
- æŒ‰æ—¶é•¿åˆ†å‰²
- æŒ‰æ–‡ä»¶å¤§å°åˆ†å‰²
- æ‰‹åŠ¨æŒ‡å®šåˆ†å‰²ç‚¹
- æ‰¹é‡è¾“å‡º

#### 5.6 GIFç”Ÿæˆ
- è§†é¢‘ç‰‡æ®µè½¬GIF
- å¸§ç‡å’Œè´¨é‡æ§åˆ¶
- å¾ªç¯æ¬¡æ•°è®¾ç½®
- æ–‡ä»¶å¤§å°ä¼˜åŒ–

---

## ğŸ’» æ”¯æŒå¹³å°

### macOS
- **æ¶æ„**ï¼šx86_64ï¼ˆIntelï¼‰å’Œ ARM64ï¼ˆApple Siliconï¼‰é€šç”¨äºŒè¿›åˆ¶
- **æœ€ä½ç‰ˆæœ¬**ï¼šmacOS 10.15 (Catalina)
- **æ¨èç‰ˆæœ¬**ï¼šmacOS 12+ (MontereyåŠä»¥ä¸Š)
- **ç‰¹æ€§æ”¯æŒ**ï¼š
  - ä»£ç ç­¾åå’Œå…¬è¯
  - DMGå®‰è£…åŒ…ç¾åŒ–
  - Retinaæ˜¾ç¤ºå±ä¼˜åŒ–

### Windows
- **æ¶æ„**ï¼šx64
- **æœ€ä½ç‰ˆæœ¬**ï¼šWindows 10 (1809æˆ–æ›´é«˜ç‰ˆæœ¬)
- **æ¨èç‰ˆæœ¬**ï¼šWindows 11
- **ç‰¹æ€§æ”¯æŒ**ï¼š
  - ä»£ç ç­¾å
  - NSISå®‰è£…ç¨‹åº
  - å¼€å§‹èœå•é›†æˆ

---

## ğŸ¨ ç”¨æˆ·ç•Œé¢è®¾è®¡

### æ•´ä½“å¸ƒå±€
- **ç°ä»£åŒ–è®¾è®¡**ï¼šéµå¾ªMaterial Designæˆ–Fluent Designè®¾è®¡è§„èŒƒ
- **å“åº”å¼ç•Œé¢**ï¼šé€‚é…ä¸åŒåˆ†è¾¨ç‡å’Œçª—å£å¤§å°
- **æ ‡ç­¾é¡µå¯¼èˆª**ï¼šæ¯ä¸ªæ ¸å¿ƒåŠŸèƒ½ç‹¬ç«‹æ ‡ç­¾é¡µ
- **æ·±è‰²/æµ…è‰²ä¸»é¢˜**ï¼šæ”¯æŒä¸»é¢˜åˆ‡æ¢å’Œç³»ç»Ÿä¸»é¢˜è·Ÿéš

### ä¸»è¦ç»„ä»¶

#### 1. æ–‡ä»¶é€‰æ‹©å™¨
- æ‹–æ‹½ä¸Šä¼ æ”¯æŒ
- æ–‡ä»¶æµè§ˆå™¨é€‰æ‹©
- æœ€è¿‘ä½¿ç”¨æ–‡ä»¶åˆ—è¡¨
- æ–‡ä»¶ä¿¡æ¯æ˜¾ç¤ºï¼ˆæ—¶é•¿ã€åˆ†è¾¨ç‡ã€ç¼–è§£ç å™¨ã€æ–‡ä»¶å¤§å°ï¼‰

#### 2. è®¾ç½®é¢æ¿
- é¢„è®¾é€‰æ‹©ä¸‹æ‹‰èœå•
- è‡ªå®šä¹‰å‚æ•°è¡¨å•
- è®¾ç½®é¢„è§ˆå’ŒéªŒè¯
- ä¿å­˜/åŠ è½½è®¾ç½®é…ç½®

#### 3. é¢„è§ˆçª—å£
- è§†é¢‘æ’­æ”¾å™¨é›†æˆï¼ˆvideo.jsï¼‰
- æ’­æ”¾æ§åˆ¶ï¼ˆæ’­æ”¾/æš‚åœã€å¿«è¿›/å€’é€€ã€è¿›åº¦æ¡ï¼‰
- æˆªå›¾åŠŸèƒ½
- å¤„ç†å‰åå¯¹æ¯”è§†å›¾
- å®æ—¶æ•ˆæœé¢„è§ˆï¼ˆç‰¹åˆ«æ˜¯å­—å¹•å’Œæ°´å°ï¼‰

#### 4. è¿›åº¦æ˜¾ç¤º
- å®æ—¶è¿›åº¦æ¡ï¼ˆç™¾åˆ†æ¯”ï¼‰
- è¯¦ç»†ä¿¡æ¯ï¼š
  - å½“å‰å¤„ç†é€Ÿåº¦ï¼ˆfpsï¼‰
  - å·²ç”¨æ—¶é—´/å‰©ä½™æ—¶é—´
  - å½“å‰æ–‡ä»¶å¤§å°/é¢„ä¼°æœ€ç»ˆå¤§å°
- å¤šä»»åŠ¡è¿›åº¦åˆ—è¡¨

#### 5. æ—¥å¿—æ§åˆ¶å°
- å®æ—¶å¤„ç†æ—¥å¿—
- ä¸åŒçº§åˆ«æ—¥å¿—ï¼ˆä¿¡æ¯ã€è­¦å‘Šã€é”™è¯¯ï¼‰
- æ—¥å¿—æœç´¢å’Œè¿‡æ»¤
- æ—¥å¿—å¯¼å‡ºåŠŸèƒ½
- æ¸…é™¤æ—¥å¿—æŒ‰é’®

#### 6. å·¥å…·æ 
- å¿«æ·æ“ä½œæŒ‰é’®
- è®¾ç½®å’Œå¸®åŠ©å…¥å£
- è¯­è¨€åˆ‡æ¢
- ä¸»é¢˜åˆ‡æ¢

### å¤šè¯­è¨€æ”¯æŒ â­ æ–°å¢
- ç®€ä½“ä¸­æ–‡
- English
- æ—¥æœ¬èªï¼ˆå¯æ‰©å±•ï¼‰
- ä¸€é”®åˆ‡æ¢ï¼Œå®æ—¶ç”Ÿæ•ˆ

### äº¤äº’ä¼˜åŒ– â­ æ–°å¢
- **é”®ç›˜å¿«æ·é”®**ï¼š
  - `Ctrl/Cmd + O`ï¼šæ‰“å¼€æ–‡ä»¶
  - `Ctrl/Cmd + S`ï¼šä¿å­˜è®¾ç½®
  - `Ctrl/Cmd + Enter`ï¼šå¼€å§‹å¤„ç†
  - `Esc`ï¼šå–æ¶ˆå½“å‰ä»»åŠ¡
  - `F11`ï¼šå…¨å±é¢„è§ˆ
- **å³é”®èœå•**ï¼šå¿«æ·æ“ä½œ
- **Tooltipæç¤º**ï¼šåŠŸèƒ½è¯´æ˜
- **æ“ä½œå¼•å¯¼**ï¼šé¦–æ¬¡ä½¿ç”¨å‘å¯¼

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¡†æ¶
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Electron Desktop App             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  UI Layer (React + TypeScript)          â”‚
â”‚  â”œâ”€ Components (åŠŸèƒ½ç»„ä»¶)               â”‚
â”‚  â”œâ”€ State Management (Zustand/Redux)    â”‚
â”‚  â””â”€ Styling (SCSS/Tailwind CSS)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Business Logic Layer (Node.js)         â”‚
â”‚  â”œâ”€ FFmpeg Wrapper (å‘½ä»¤ç”Ÿæˆå’Œæ‰§è¡Œ)     â”‚
â”‚  â”œâ”€ Task Manager (ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†)         â”‚
â”‚  â”œâ”€ Settings Manager (é…ç½®ç®¡ç†)         â”‚
â”‚  â””â”€ File Manager (æ–‡ä»¶æ“ä½œ)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  IPC Communication (è¿›ç¨‹é—´é€šä¿¡)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Native Layer                            â”‚
â”‚  â”œâ”€ FFmpeg (è§†é¢‘å¤„ç†å¼•æ“)               â”‚
â”‚  â”œâ”€ File System (æ–‡ä»¶ç³»ç»Ÿ)              â”‚
â”‚  â””â”€ Hardware Acceleration (ç¡¬ä»¶åŠ é€Ÿ)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

#### å‰ç«¯æ¡†æ¶
- **Electron.js 28+**ï¼šæ¡Œé¢åº”ç”¨æ¡†æ¶
- **React 18+**ï¼šUIç»„ä»¶åº“
- **TypeScript 5+**ï¼šç±»å‹å®‰å…¨çš„JavaScript â­ æ–°å¢
- **React Router**ï¼šè·¯ç”±ç®¡ç†
- **Zustand** æˆ– **Redux Toolkit**ï¼šçŠ¶æ€ç®¡ç† â­ æ–°å¢

#### UIç»„ä»¶åº“
- **React Bootstrap 2+** æˆ– **Ant Design**ï¼šUIç»„ä»¶
- **Tailwind CSS** æˆ– **SCSS**ï¼šæ ·å¼è§£å†³æ–¹æ¡ˆ â­ æ–°å¢
- **react-icons**ï¼šå›¾æ ‡åº“
- **video.js**ï¼šè§†é¢‘æ’­æ”¾å™¨ â­ æ–°å¢

#### åç«¯é€»è¾‘
- **Node.js 18+**ï¼šä¸šåŠ¡é€»è¾‘å±‚
- **child_process**ï¼šFFmpegè¿›ç¨‹ç®¡ç†
- **fluent-ffmpeg**ï¼šFFmpegå‘½ä»¤å°è£…
- **fs-extra**ï¼šå¢å¼ºçš„æ–‡ä»¶ç³»ç»Ÿæ“ä½œ

#### æ•°æ®å­˜å‚¨
- **electron-store**ï¼šé…ç½®æŒä¹…åŒ–
- **JSON**ï¼šè®¾ç½®å’Œé¢„è®¾å­˜å‚¨
- **lowdb** æˆ– **SQLite**ï¼šå†å²è®°å½•å­˜å‚¨ â­ æ–°å¢

#### FFmpegé›†æˆ
- **@ffmpeg-installer/ffmpeg**ï¼šFFmpegäºŒè¿›åˆ¶æ–‡ä»¶
- **ffprobe-static**ï¼šè§†é¢‘ä¿¡æ¯æ¢æµ‹
- **åŠ¨æ€ä¸‹è½½**ï¼šé¦–æ¬¡è¿è¡Œæ—¶ä¸‹è½½FFmpegï¼ˆå¯é€‰ï¼‰ â­ æ–°å¢

#### å·¥å…·åº“
- **i18next + react-i18next**ï¼šå›½é™…åŒ– â­ æ–°å¢
- **dayjs**ï¼šæ—¥æœŸæ—¶é—´å¤„ç† â­ æ–°å¢
- **classnames**ï¼šCSSç±»åç®¡ç† â­ æ–°å¢
- **electron-log**ï¼šæ—¥å¿—ç®¡ç† â­ æ–°å¢
- **electron-updater**ï¼šè‡ªåŠ¨æ›´æ–° â­ æ–°å¢

#### å¼€å‘å·¥å…· â­ æ–°å¢
- **ESLint + Prettier**ï¼šä»£ç è§„èŒƒ
- **Jest**ï¼šå•å…ƒæµ‹è¯•
- **Playwright** æˆ– **Spectron**ï¼šE2Eæµ‹è¯•
- **electron-builder**ï¼šæ‰“åŒ…æ„å»º
- **Webpack** æˆ– **Vite**ï¼šæ¨¡å—æ‰“åŒ…

---

## ğŸ“ é¡¹ç›®ç»“æ„

```plaintext
VideoTool/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/                          # Electronä¸»è¿›ç¨‹
â”‚   â”‚   â”œâ”€â”€ index.ts                   # ä¸»è¿›ç¨‹å…¥å£
â”‚   â”‚   â”œâ”€â”€ window.ts                  # çª—å£ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ipc/                       # IPCå¤„ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ ffmpeg.handler.ts      # FFmpegç›¸å…³IPC
â”‚   â”‚   â”‚   â”œâ”€â”€ file.handler.ts        # æ–‡ä»¶æ“ä½œIPC
â”‚   â”‚   â”‚   â”œâ”€â”€ settings.handler.ts    # è®¾ç½®ç›¸å…³IPC
â”‚   â”‚   â”‚   â””â”€â”€ subtitle.handler.ts    # å­—å¹•è½¬æ¢IPC â­ æ–°å¢
â”‚   â”‚   â”œâ”€â”€ services/                  # æœåŠ¡å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ FFmpegService.ts       # FFmpegæœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskService.ts         # ä»»åŠ¡ç®¡ç†æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ SettingsService.ts     # è®¾ç½®ç®¡ç†æœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ SubtitleService.ts     # å­—å¹•è½¬æ¢æœåŠ¡ â­ æ–°å¢
â”‚   â”‚   â””â”€â”€ utils/                     # å·¥å…·å‡½æ•°
â”‚   â”‚       â”œâ”€â”€ ffmpeg.util.ts         # FFmpegå·¥å…·
â”‚   â”‚       â”œâ”€â”€ file.util.ts           # æ–‡ä»¶å·¥å…·
â”‚   â”‚       â”œâ”€â”€ subtitle/              # å­—å¹•å·¥å…· â­ æ–°å¢
â”‚   â”‚       â”‚   â”œâ”€â”€ RegexProcessor.ts  # æ­£åˆ™æ›¿æ¢å¼•æ“
â”‚   â”‚       â”‚   â”œâ”€â”€ SRTParser.ts       # SRTè§£æå™¨
â”‚   â”‚       â”‚   â”œâ”€â”€ ASSGenerator.ts    # ASSç”Ÿæˆå™¨
â”‚   â”‚       â”‚   â””â”€â”€ SubtitleConverter.ts  # å­—å¹•è½¬æ¢å™¨
â”‚   â”‚       â””â”€â”€ logger.ts              # æ—¥å¿—å·¥å…·
â”‚   â”‚
â”‚   â”œâ”€â”€ renderer/                      # Electronæ¸²æŸ“è¿›ç¨‹
â”‚   â”‚   â”œâ”€â”€ index.tsx                  # æ¸²æŸ“è¿›ç¨‹å…¥å£
â”‚   â”‚   â”œâ”€â”€ App.tsx                    # æ ¹ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/                # Reactç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Layout/                # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Footer.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Common/                # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FileSelector.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Progress.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Preview.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LogConsole.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SettingsPanel.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Features/              # åŠŸèƒ½ç»„ä»¶
â”‚   â”‚   â”‚       â”œâ”€â”€ MergeTab.tsx       # åˆå¹¶åŠŸèƒ½
â”‚   â”‚   â”‚       â”œâ”€â”€ TranscodeTab.tsx   # è½¬ç åŠŸèƒ½
â”‚   â”‚   â”‚       â”œâ”€â”€ SubtitleTab.tsx    # å­—å¹•çƒ§å½•åŠŸèƒ½
â”‚   â”‚   â”‚       â”œâ”€â”€ SubtitleConvertTab.tsx  # å­—å¹•è½¬æ¢åŠŸèƒ½ â­ æ–°å¢
â”‚   â”‚   â”‚       â”œâ”€â”€ BatchTab.tsx       # æ‰¹é‡å¤„ç†
â”‚   â”‚   â”‚       â”œâ”€â”€ CropTab.tsx        # è£å‰ªåŠŸèƒ½
â”‚   â”‚   â”‚       â”œâ”€â”€ WatermarkTab.tsx   # æ°´å°åŠŸèƒ½
â”‚   â”‚   â”‚       â””â”€â”€ ToolsTab.tsx       # å…¶ä»–å·¥å…·
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ hooks/                     # è‡ªå®šä¹‰Hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ useFFmpeg.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useSettings.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useTaskQueue.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useSubtitleConvert.ts  # å­—å¹•è½¬æ¢Hook â­ æ–°å¢
â”‚   â”‚   â”‚   â””â”€â”€ useTheme.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ store/                     # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ slices/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ task.slice.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ settings.slice.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ui.slice.ts
â”‚   â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ styles/                    # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ global.scss
â”‚   â”‚   â”‚   â”œâ”€â”€ themes/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ light.scss
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ dark.scss
â”‚   â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ locales/                   # å›½é™…åŒ–æ–‡ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ zh-CN.json
â”‚   â”‚   â”‚   â”œâ”€â”€ en-US.json
â”‚   â”‚   â”‚   â””â”€â”€ ja-JP.json
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ types/                     # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ ffmpeg.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ task.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ settings.types.ts
â”‚   â”‚   â”‚   â””â”€â”€ subtitle.types.ts      # å­—å¹•è½¬æ¢ç±»å‹ â­ æ–°å¢
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ utils/                     # æ¸²æŸ“è¿›ç¨‹å·¥å…·
â”‚   â”‚       â”œâ”€â”€ format.ts              # æ ¼å¼åŒ–å·¥å…·
â”‚   â”‚       â”œâ”€â”€ validation.ts          # éªŒè¯å·¥å…·
â”‚   â”‚       â””â”€â”€ constants.ts           # å¸¸é‡å®šä¹‰
â”‚   â”‚
â”‚   â””â”€â”€ shared/                        # å…±äº«ä»£ç 
â”‚       â”œâ”€â”€ constants.ts               # å…¨å±€å¸¸é‡
â”‚       â”œâ”€â”€ types.ts                   # å…±äº«ç±»å‹
â”‚       â””â”€â”€ presets/                   # é¢„è®¾é…ç½®
â”‚           â”œâ”€â”€ merge.presets.json
â”‚           â”œâ”€â”€ transcode.presets.json
â”‚           â”œâ”€â”€ subtitle.presets.json
â”‚           â”œâ”€â”€ subtitle-convert/      # å­—å¹•è½¬æ¢é¢„è®¾ â­ æ–°å¢
â”‚           â”‚   â”œâ”€â”€ regex-rules.json   # æ­£åˆ™æ›¿æ¢è§„åˆ™
â”‚           â”‚   â”œâ”€â”€ ass-styles.txt     # ASSæ ·å¼æ¨¡æ¿
â”‚           â”‚   â””â”€â”€ convert-config.json # è½¬æ¢é…ç½®
â”‚
â”œâ”€â”€ public/                            # é™æ€èµ„æº
â”‚   â”œâ”€â”€ index.html                     # HTMLæ¨¡æ¿
â”‚   â”œâ”€â”€ icons/                         # åº”ç”¨å›¾æ ‡
â”‚   â”‚   â”œâ”€â”€ icon.icns                  # macOSå›¾æ ‡
â”‚   â”‚   â”œâ”€â”€ icon.ico                   # Windowså›¾æ ‡
â”‚   â”‚   â””â”€â”€ icon.png                   # é€šç”¨å›¾æ ‡
â”‚   â””â”€â”€ assets/                        # å…¶ä»–èµ„æº
â”‚       â”œâ”€â”€ images/
â”‚       â””â”€â”€ fonts/
â”‚
â”œâ”€â”€ resources/                         # æ„å»ºèµ„æº
â”‚   â”œâ”€â”€ ffmpeg/                        # FFmpegäºŒè¿›åˆ¶
â”‚   â”‚   â”œâ”€â”€ darwin-x64/
â”‚   â”‚   â”œâ”€â”€ darwin-arm64/
â”‚   â”‚   â””â”€â”€ win32-x64/
â”‚   â””â”€â”€ installer/                     # å®‰è£…ç¨‹åºèµ„æº
â”‚
â”œâ”€â”€ tests/                             # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ unit/                          # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”œâ”€â”€ integration/                   # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ e2e/                           # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚
â”œâ”€â”€ scripts/                           # æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ build.js                       # æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ dev.js                         # å¼€å‘è„šæœ¬
â”‚   â””â”€â”€ download-ffmpeg.js             # FFmpegä¸‹è½½è„šæœ¬
â”‚
â”œâ”€â”€ docs/                              # æ–‡æ¡£
â”‚   â”œâ”€â”€ API.md                         # APIæ–‡æ¡£
â”‚   â”œâ”€â”€ ARCHITECTURE.md                # æ¶æ„æ–‡æ¡£
â”‚   â””â”€â”€ CONTRIBUTING.md                # è´¡çŒ®æŒ‡å—
â”‚
â”œâ”€â”€ .github/                           # GitHubé…ç½®
â”‚   â””â”€â”€ workflows/                     # CI/CDå·¥ä½œæµ
â”‚       â”œâ”€â”€ build.yml
â”‚       â””â”€â”€ test.yml
â”‚
â”œâ”€â”€ package.json                       # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json                      # TypeScripté…ç½®
â”œâ”€â”€ .eslintrc.js                       # ESLinté…ç½®
â”œâ”€â”€ .prettierrc                        # Prettieré…ç½®
â”œâ”€â”€ electron-builder.yml               # æ‰“åŒ…é…ç½®
â”œâ”€â”€ README.md                          # é¡¹ç›®è¯´æ˜
â””â”€â”€ LICENSE                            # è®¸å¯è¯
```

---

## ğŸ“¦ æ ¸å¿ƒæ¨¡å—è¯¦è§£

### 1. FFmpegWrapperï¼ˆFFmpegå°è£…å™¨ï¼‰

**èŒè´£**ï¼šç”Ÿæˆå’Œæ‰§è¡ŒFFmpegå‘½ä»¤

**ä¸»è¦åŠŸèƒ½**ï¼š
- å‘½ä»¤ç”Ÿæˆå™¨ï¼ˆåŸºäºç”¨æˆ·è®¾ç½®ç”ŸæˆFFmpegå‘½ä»¤ï¼‰
- è¿›ç¨‹ç®¡ç†ï¼ˆå¯åŠ¨ã€ç›‘æ§ã€ç»ˆæ­¢FFmpegè¿›ç¨‹ï¼‰
- è¿›åº¦è§£æï¼ˆè§£æFFmpegè¾“å‡ºè·å–è¿›åº¦ä¿¡æ¯ï¼‰
- é”™è¯¯å¤„ç†ï¼ˆæ•è·å’Œè§£æFFmpegé”™è¯¯ï¼‰

**æ¥å£ç¤ºä¾‹**ï¼š
```typescript
interface FFmpegWrapper {
  merge(audioPath: string, videoPath: string, outputPath: string, options: MergeOptions): Promise<void>;
  transcode(inputPath: string, outputPath: string, options: TranscodeOptions): Promise<void>;
  burnSubtitle(videoPath: string, subtitlePath: string, outputPath: string, options: SubtitleOptions): Promise<void>;
  getVideoInfo(filePath: string): Promise<VideoInfo>;
  cancel(taskId: string): void;
  onProgress(callback: (progress: Progress) => void): void;
}
```

**ä¼˜åŒ–ç‰¹æ€§** â­ï¼š
- ç¡¬ä»¶åŠ é€Ÿæ”¯æŒï¼ˆNVIDIA NVENCã€AMD VCEã€Intel QSVï¼‰
- å¤šçº¿ç¨‹ç¼–ç 
- è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜ç¼–ç å‚æ•°

### 2. TaskManagerï¼ˆä»»åŠ¡ç®¡ç†å™¨ï¼‰

**èŒè´£**ï¼šç®¡ç†è§†é¢‘å¤„ç†ä»»åŠ¡é˜Ÿåˆ—

**ä¸»è¦åŠŸèƒ½**ï¼š
- ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†ï¼ˆFIFOã€ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼‰
- å¹¶å‘æ§åˆ¶ï¼ˆåŒæ—¶è¿è¡Œçš„æœ€å¤§ä»»åŠ¡æ•°ï¼‰
- ä»»åŠ¡çŠ¶æ€è¿½è¸ªï¼ˆå¾…å¤„ç†ã€å¤„ç†ä¸­ã€å·²å®Œæˆã€å¤±è´¥ï¼‰
- æ–­ç‚¹ç»­ä¼ ï¼ˆä»»åŠ¡ä¸­æ–­åæ¢å¤ï¼‰â­ æ–°å¢
- ä»»åŠ¡å†å²è®°å½• â­ æ–°å¢

**æ¥å£ç¤ºä¾‹**ï¼š
```typescript
interface TaskManager {
  addTask(task: Task): string;
  removeTask(taskId: string): void;
  pauseTask(taskId: string): void;
  resumeTask(taskId: string): void;
  cancelTask(taskId: string): void;
  getTaskStatus(taskId: string): TaskStatus;
  getTaskQueue(): Task[];
  setMaxConcurrency(max: number): void;
  retryFailedTask(taskId: string): void; // æ–°å¢
}
```

### 3. SettingsManagerï¼ˆè®¾ç½®ç®¡ç†å™¨ï¼‰

**èŒè´£**ï¼šç®¡ç†ç”¨æˆ·è®¾ç½®å’Œé¢„è®¾

**ä¸»è¦åŠŸèƒ½**ï¼š
- é¢„è®¾åŠ è½½å’Œä¿å­˜
- è‡ªå®šä¹‰è®¾ç½®éªŒè¯
- è®¾ç½®å¯¼å…¥/å¯¼å‡ºï¼ˆJSONæ ¼å¼ï¼‰
- é»˜è®¤è®¾ç½®ç®¡ç†
- è®¾ç½®å†å²è®°å½• â­ æ–°å¢
- äº‘åŒæ­¥ï¼ˆå¯é€‰ï¼‰â­ æ–°å¢

**æ¥å£ç¤ºä¾‹**ï¼š
```typescript
interface SettingsManager {
  loadPresets(feature: FeatureType): Preset[];
  savePreset(feature: FeatureType, preset: Preset): void;
  deletePreset(feature: FeatureType, presetId: string): void;
  exportSettings(filePath: string): void;
  importSettings(filePath: string): Settings;
  getDefaultSettings(feature: FeatureType): Settings;
  validateSettings(settings: Settings): ValidationResult;
}
```

### 4. FileManagerï¼ˆæ–‡ä»¶ç®¡ç†å™¨ï¼‰â­ æ–°å¢

**èŒè´£**ï¼šæ–‡ä»¶æ“ä½œå’Œç®¡ç†

**ä¸»è¦åŠŸèƒ½**ï¼š
- æ–‡ä»¶ä¿¡æ¯è¯»å–
- ä¸´æ—¶æ–‡ä»¶ç®¡ç†
- ç£ç›˜ç©ºé—´æ£€æŸ¥
- æ–‡ä»¶å¤‡ä»½å’Œæ¢å¤
- æ–‡ä»¶å‘½åè§„åˆ™

**æ¥å£ç¤ºä¾‹**ï¼š
```typescript
interface FileManager {
  getFileInfo(filePath: string): Promise<FileInfo>;
  checkDiskSpace(path: string): Promise<DiskSpace>;
  createTempFile(extension: string): string;
  cleanupTempFiles(): void;
  backupFile(filePath: string): Promise<string>;
  generateOutputName(inputPath: string, options: NamingOptions): string;
}
```

### 5. SubtitleConverterï¼ˆå­—å¹•è½¬æ¢å™¨ï¼‰â­ æ–°å¢

**èŒè´£**ï¼šSRTå­—å¹•è½¬æ¢ä¸ºASSæ ¼å¼ï¼Œæ”¯æŒæ­£åˆ™é¢„å¤„ç†å’Œæ ·å¼åº”ç”¨

**ä¸»è¦åŠŸèƒ½**ï¼š
- æ­£åˆ™æ›¿æ¢é¢„å¤„ç†ï¼ˆåº”ç”¨7æ¡å†…ç½®è§„åˆ™ï¼‰
- SRTæ ¼å¼è§£æ
- ASSæ ¼å¼ç”Ÿæˆ
- æ ·å¼æ¨¡æ¿ç®¡ç†
- æ‰¹é‡è½¬æ¢æ”¯æŒ
- è½¬æ¢é¢„è§ˆå’ŒéªŒè¯

**æ ¸å¿ƒç»„ä»¶**ï¼š

#### 5.1 RegexProcessorï¼ˆæ­£åˆ™å¤„ç†å™¨ï¼‰
```typescript
interface RegexRule {
  id: string;
  name: string;
  pattern: string;
  replacement: string;
  description: string;
  enabled: boolean;
  order: number;
}

class RegexProcessor {
  constructor(rules: RegexRule[]);
  applyRules(text: string): string;
  testRule(text: string, rule: RegexRule): string;
  addRule(rule: RegexRule): void;
  removeRule(ruleId: string): void;
  updateRule(ruleId: string, updates: Partial<RegexRule>): void;
  enableRule(ruleId: string, enabled: boolean): void;
  reorderRules(ruleIds: string[]): void;
  exportRules(): string; // JSONæ ¼å¼
  importRules(json: string): void;
}
```

#### 5.2 SRTParserï¼ˆSRTè§£æå™¨ï¼‰
```typescript
interface SRTSubtitle {
  index: number;
  startTime: string;  // "00:00:00,000"
  endTime: string;    // "00:00:06,800"
  text: string;
  originalText?: string; // å¤„ç†å‰çš„åŸå§‹æ–‡æœ¬
}

class SRTParser {
  parse(content: string): SRTSubtitle[];
  validate(content: string): ValidationResult;
  detectEncoding(buffer: Buffer): string;
}
```

#### 5.3 ASSGeneratorï¼ˆASSç”Ÿæˆå™¨ï¼‰
```typescript
interface ASSStyle {
  name: string;
  fontname: string;
  fontsize: number;
  primaryColour: string;
  secondaryColour: string;
  outlineColour: string;
  backColour: string;
  bold: number;
  italic: number;
  underline: number;
  strikeOut: number;
  scaleX: number;
  scaleY: number;
  spacing: number;
  angle: number;
  borderStyle: number;
  outline: number;
  shadow: number;
  alignment: number;
  marginL: number;
  marginR: number;
  marginV: number;
  encoding: number;
  lineSpacing: number;
}

interface ASSOptions {
  resolution: { width: number; height: number };
  scriptType: string;
  wrapStyle: number;
  scaledBorderAndShadow: boolean;
}

class ASSGenerator {
  constructor(styles: ASSStyle[], options: ASSOptions);
  generate(subtitles: SRTSubtitle[], defaultStyle: string): string;
  addStyle(style: ASSStyle): void;
  removeStyle(styleName: string): void;
  getStyles(): ASSStyle[];
  parseStylesFromFile(filePath: string): ASSStyle[];
}
```

#### 5.4 SubtitleConverterï¼ˆä¸»è½¬æ¢å™¨ï¼‰
```typescript
interface ConvertOptions {
  encoding: string;
  regexRules: RegexRule[];
  selectedStyle: string;
  styles: ASSStyle[];
  assOptions: ASSOptions;
  applyRegexRules: boolean;
  timeOffset?: number; // æ¯«ç§’
}

interface ConvertResult {
  success: boolean;
  outputPath?: string;
  errors?: string[];
  warnings?: string[];
  stats: {
    totalSubtitles: number;
    processedSubtitles: number;
    duration: number; // æ¯«ç§’
  };
}

class SubtitleConverter {
  async convertSrtToAss(
    srtFilePath: string,
    assFilePath: string,
    options: ConvertOptions
  ): Promise<ConvertResult>;
  
  async batchConvert(
    files: Array<{ input: string; output: string }>,
    options: ConvertOptions,
    onProgress?: (progress: number, currentFile: string) => void
  ): Promise<ConvertResult[]>;
  
  async previewConversion(
    srtContent: string,
    options: ConvertOptions
  ): Promise<string>; // è¿”å›ASSå†…å®¹é¢„è§ˆ
  
  validateSRT(filePath: string): Promise<ValidationResult>;
  
  getDefaultRegexRules(): RegexRule[];
  
  getDefaultStyles(): ASSStyle[];
}
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```typescript
// 1. åˆå§‹åŒ–è½¬æ¢å™¨
const converter = new SubtitleConverter();

// 2. é…ç½®é€‰é¡¹
const options: ConvertOptions = {
  encoding: 'utf-8',
  regexRules: converter.getDefaultRegexRules(),
  selectedStyle: 'è¯‘æ–‡å­—å¹• åº•éƒ¨',
  styles: converter.getDefaultStyles(),
  assOptions: {
    resolution: { width: 384, height: 288 },
    scriptType: 'v4.00+',
    wrapStyle: 0,
    scaledBorderAndShadow: false
  },
  applyRegexRules: true,
  timeOffset: 0
};

// 3. è½¬æ¢å•ä¸ªæ–‡ä»¶
const result = await converter.convertSrtToAss(
  '/path/to/input.srt',
  '/path/to/output.ass',
  options
);

if (result.success) {
  console.log(`è½¬æ¢æˆåŠŸï¼å¤„ç†äº† ${result.stats.totalSubtitles} æ¡å­—å¹•`);
} else {
  console.error('è½¬æ¢å¤±è´¥ï¼š', result.errors);
}

// 4. æ‰¹é‡è½¬æ¢
const files = [
  { input: 'ep01.srt', output: 'ep01.ass' },
  { input: 'ep02.srt', output: 'ep02.ass' }
];

const results = await converter.batchConvert(files, options, (progress, file) => {
  console.log(`å¤„ç†è¿›åº¦: ${progress}% - ${file}`);
});
```

**å†…ç½®æ­£åˆ™è§„åˆ™**ï¼š

| è§„åˆ™ID | åç§° | æ­£åˆ™ | æ›¿æ¢ | é¡ºåº |
|--------|------|------|------|------|
| rule-001 | ç§»é™¤æ–œä½“æ ‡ç­¾ | `</?i>` | `` | 1 |
| rule-002 | ç§»é™¤ä¸­æ–‡å¼•å· | `[""]+` | `` | 2 |
| rule-003 | æ›¿æ¢ä¸­æ–‡æ ‡ç‚¹ | `\s*[ï¼Œã€‚ï¼›ã€~Â·ï¼Ÿï¼ï¿¥â€”]+\s*` | ` ` | 3 |
| rule-004 | æ ¼å¼åŒ–è¿å­—ç¬¦ï¼ˆéå¼€å¤´ï¼‰ | `(?<!^)\s*-\s*` | ` -` | 4 |
| rule-005 | æ ¼å¼åŒ–è¿å­—ç¬¦ï¼ˆå¼€å¤´ï¼‰ | `^\s*-\s*` | `-` | 5 |
| rule-006 | æ›¿æ¢è‹±æ–‡æ ‡ç‚¹ | `[,?!;'"{}]+` | ` ` | 6 |
| rule-007 | æ¸…ç†é¦–å°¾ç©ºæ ¼ | `(^\s+)\|(\s+$)` | `` | 7 |

**å†…ç½®æ ·å¼æ¨¡æ¿**ï¼šå…±12ç§æ ·å¼ï¼ˆåŒè¯­åŸæ–‡/è¯‘æ–‡ã€æ­Œè¯ã€æ¼”èŒäººå‘˜ã€æ³¨é‡Šç­‰ï¼‰ï¼Œè¯¦è§"å­—å¹•æ ¼å¼è½¬æ¢"ç« èŠ‚ã€‚

---

## âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 1. ç¡¬ä»¶åŠ é€Ÿ â­
- **NVIDIA GPU**ï¼šä½¿ç”¨NVENCç¼–ç å™¨ï¼ˆh264_nvencã€hevc_nvencï¼‰
- **AMD GPU**ï¼šä½¿ç”¨AMFç¼–ç å™¨ï¼ˆh264_amfã€hevc_amfï¼‰
- **Intel GPU**ï¼šä½¿ç”¨QSVç¼–ç å™¨ï¼ˆh264_qsvã€hevc_qsvï¼‰
- **è‡ªåŠ¨æ£€æµ‹**ï¼šç¨‹åºå¯åŠ¨æ—¶æ£€æµ‹å¯ç”¨ç¡¬ä»¶åŠ é€Ÿ

### 2. å¤šçº¿ç¨‹å¤„ç† â­
- FFmpegçš„threadså‚æ•°ä¼˜åŒ–
- æ‰¹é‡å¤„ç†æ—¶çš„å¹¶è¡Œä»»åŠ¡
- å……åˆ†åˆ©ç”¨å¤šæ ¸CPU

### 3. å†…å­˜ä¼˜åŒ– â­
- å¤§æ–‡ä»¶åˆ†å—å¤„ç†
- åŠæ—¶é‡Šæ”¾å†…å­˜èµ„æº
- ä¸´æ—¶æ–‡ä»¶ç®¡ç†ä¼˜åŒ–

### 4. ç¼–ç ä¼˜åŒ– â­
- ä¸¤æ¬¡ç¼–ç ï¼ˆTwo-pass encodingï¼‰æé«˜è´¨é‡
- é¢„è®¾é€‰æ‹©ï¼ˆultrafastã€fastã€mediumã€slowï¼‰
- CRFå€¼ä¼˜åŒ–

### 5. ç¼“å­˜ç­–ç•¥ â­
- è§†é¢‘ä¿¡æ¯ç¼“å­˜
- é¢„è§ˆå¸§ç¼“å­˜
- è®¾ç½®å’Œé¢„è®¾ç¼“å­˜

---

## ğŸ›¡ï¸ é”™è¯¯å¤„ç†å’Œæ¢å¤

### 1. é”™è¯¯ç±»å‹
- **æ–‡ä»¶é”™è¯¯**ï¼šæ–‡ä»¶ä¸å­˜åœ¨ã€æ ¼å¼ä¸æ”¯æŒã€æ–‡ä»¶æŸå
- **å‚æ•°é”™è¯¯**ï¼šè®¾ç½®å‚æ•°æ— æ•ˆã€å†²çªçš„é€‰é¡¹
- **å¤„ç†é”™è¯¯**ï¼šFFmpegæ‰§è¡Œå¤±è´¥ã€ç¼–ç é”™è¯¯
- **ç³»ç»Ÿé”™è¯¯**ï¼šç£ç›˜ç©ºé—´ä¸è¶³ã€æƒé™ä¸è¶³

### 2. é”™è¯¯å¤„ç†ç­–ç•¥ â­
- **å‹å¥½çš„é”™è¯¯æç¤º**ï¼šè¯¦ç»†è¯´æ˜é”™è¯¯åŸå› å’Œè§£å†³æ–¹æ¡ˆ
- **è‡ªåŠ¨é‡è¯•**ï¼šç½‘ç»œæˆ–ä¸´æ—¶é”™è¯¯è‡ªåŠ¨é‡è¯•ï¼ˆæœ€å¤š3æ¬¡ï¼‰
- **æ—¥å¿—è®°å½•**ï¼šè¯¦ç»†è®°å½•é”™è¯¯å †æ ˆå’Œä¸Šä¸‹æ–‡
- **é”™è¯¯æ¢å¤**ï¼šå°½å¯èƒ½æ¢å¤åˆ°ä¸Šä¸€ä¸ªç¨³å®šçŠ¶æ€
- **å´©æºƒæŠ¥å‘Š**ï¼šé›†æˆSentryæ”¶é›†å´©æºƒä¿¡æ¯

### 3. æ–­ç‚¹ç»­ä¼  â­
- ä¿å­˜ä»»åŠ¡è¿›åº¦
- æ£€æµ‹æœªå®Œæˆä»»åŠ¡
- æ¢å¤ä¸­æ–­ä»»åŠ¡

---

## ğŸ” å®‰å…¨æ€§å’Œéšç§

### 1. æ•°æ®å®‰å…¨
- **æœ¬åœ°å¤„ç†**ï¼šæ‰€æœ‰å¤„ç†å®Œå…¨åœ¨æœ¬åœ°è¿›è¡Œï¼Œä¸ä¸Šä¼ åˆ°äº‘ç«¯
- **æ•°æ®åŠ å¯†**ï¼šæ•æ„Ÿé…ç½®ä½¿ç”¨åŠ å¯†å­˜å‚¨
- **æƒé™æ§åˆ¶**ï¼šæœ€å°æƒé™åŸåˆ™

### 2. æ–‡ä»¶å®‰å…¨
- **åŸæ–‡ä»¶ä¿æŠ¤**ï¼šå¯é€‰å¤‡ä»½åŸæ–‡ä»¶
- **ä¸´æ—¶æ–‡ä»¶æ¸…ç†**ï¼šå¤„ç†å®Œæˆåè‡ªåŠ¨åˆ é™¤ä¸´æ—¶æ–‡ä»¶
- **å®‰å…¨åˆ é™¤**ï¼šè¦†ç›–åˆ é™¤æ•æ„Ÿæ–‡ä»¶

### 3. éšç§ä¿æŠ¤
- **åŒ¿åç»Ÿè®¡**ï¼šä½¿ç”¨ç»Ÿè®¡æ•°æ®å®Œå…¨åŒ¿åï¼Œéœ€ç”¨æˆ·åŒæ„
- **æœ¬åœ°å­˜å‚¨**ï¼šå†å²è®°å½•å’Œè®¾ç½®ä»…ä¿å­˜åœ¨æœ¬åœ°
- **æ¸…é™¤æ•°æ®**ï¼šæä¾›å®Œå…¨æ¸…é™¤æ•°æ®åŠŸèƒ½

---

## ğŸ“Š æ•°æ®æ ¼å¼

### 1. é¢„è®¾é…ç½®æ ¼å¼ï¼ˆJSONï¼‰

```json
{
  "id": "preset-001",
  "name": "é«˜è´¨é‡1080p",
  "description": "é«˜è´¨é‡1080pè¾“å‡ºï¼Œé€‚åˆå­˜æ¡£",
  "feature": "transcode",
  "settings": {
    "video": {
      "codec": "libx264",
      "resolution": "1920x1080",
      "bitrate": "5000k",
      "fps": 30,
      "preset": "slow",
      "crf": 18
    },
    "audio": {
      "codec": "aac",
      "bitrate": "192k",
      "sampleRate": 48000,
      "channels": 2
    }
  },
  "createdAt": "2025-01-01T00:00:00Z",
  "updatedAt": "2025-01-01T00:00:00Z",
  "isBuiltIn": true
}
```

### 2. ä»»åŠ¡é…ç½®æ ¼å¼

```json
{
  "id": "task-001",
  "type": "transcode",
  "status": "processing",
  "priority": 1,
  "input": {
    "filePath": "/path/to/input.mp4",
    "fileSize": 1073741824,
    "duration": 3600,
    "videoCodec": "h264",
    "audioCodec": "aac"
  },
  "output": {
    "filePath": "/path/to/output.mp4",
    "format": "mp4"
  },
  "settings": {
    "presetId": "preset-001"
  },
  "progress": {
    "percent": 45.5,
    "speed": 2.5,
    "fps": 30,
    "timeElapsed": 600,
    "timeRemaining": 720,
    "currentSize": 524288000
  },
  "createdAt": "2025-01-01T12:00:00Z",
  "startedAt": "2025-01-01T12:00:05Z",
  "completedAt": null,
  "error": null
}
```

### 3. æ”¯æŒçš„è¾“å…¥è¾“å‡ºæ ¼å¼

**è§†é¢‘æ ¼å¼**ï¼š
- è¾“å…¥ï¼šMP4, MOV, AVI, MKV, FLV, WebM, WMV, MPEG, MPG, 3GP, TS, M4V
- è¾“å‡ºï¼šMP4, MOV, MKV, WebM, AVI, FLV

**éŸ³é¢‘æ ¼å¼**ï¼š
- è¾“å…¥ï¼šMP3, AAC, FLAC, WAV, OGG, M4A, WMA, ALAC
- è¾“å‡ºï¼šMP3, AAC, FLAC, WAV, OGG, M4A

**å­—å¹•æ ¼å¼**ï¼š
- æ”¯æŒï¼šSRT, ASS, SSA, VTT, SUB

**å›¾ç‰‡æ ¼å¼**ï¼ˆæ°´å°ã€GIFï¼‰ï¼š
- æ”¯æŒï¼šJPG, PNG, GIF, WebP, BMP

---

## ğŸ“ ç”¨æˆ·å¸®åŠ©ç³»ç»Ÿ

### 1. å†…ç½®å¸®åŠ©
- **åŠŸèƒ½è¯´æ˜**ï¼šæ¯ä¸ªåŠŸèƒ½é¡µé¢çš„è¯¦ç»†è¯´æ˜
- **å¿«é€Ÿå…¥é—¨**ï¼šé¦–æ¬¡ä½¿ç”¨å‘å¯¼
- **Tooltipæç¤º**ï¼šé¼ æ ‡æ‚¬åœæ˜¾ç¤ºè¯´æ˜
- **ç¤ºä¾‹æ¨¡æ¿**ï¼šé¢„è®¾é…ç½®ç¤ºä¾‹

### 2. æ–‡æ¡£ç³»ç»Ÿ
- **ç”¨æˆ·æ‰‹å†Œ**ï¼šå®Œæ•´çš„ä½¿ç”¨æŒ‡å—
- **è§†é¢‘æ•™ç¨‹**ï¼šæ“ä½œæ¼”ç¤ºè§†é¢‘
- **FAQ**ï¼šå¸¸è§é—®é¢˜è§£ç­”
- **æ›´æ–°æ—¥å¿—**ï¼šç‰ˆæœ¬æ›´æ–°è¯´æ˜

### 3. åé¦ˆç³»ç»Ÿ
- **é—®é¢˜æŠ¥å‘Š**ï¼šBugåé¦ˆå…¥å£
- **åŠŸèƒ½å»ºè®®**ï¼šæ–°åŠŸèƒ½å»ºè®®
- **ç”¨æˆ·ç¤¾åŒº**ï¼šè®ºå›æˆ–Discordç¾¤ç»„
- **é‚®ä»¶æ”¯æŒ**ï¼šæŠ€æœ¯æ”¯æŒé‚®ç®±

---

## ğŸš€ å¼€å‘è·¯çº¿å›¾

### ç¬¬ä¸€é˜¶æ®µï¼šMVPï¼ˆæœ€å°å¯è¡Œäº§å“ï¼‰- 2ä¸ªæœˆ

**ç›®æ ‡**ï¼šå®ç°æ ¸å¿ƒåŠŸèƒ½ï¼Œå‘å¸ƒå¯ç”¨ç‰ˆæœ¬

- âœ… åŸºç¡€æ¶æ„æ­å»º
  - Electron + React + TypeScripté¡¹ç›®åˆå§‹åŒ–
  - åŸºç¡€UIæ¡†æ¶
  - FFmpegé›†æˆ
  
- âœ… æ ¸å¿ƒåŠŸèƒ½å®ç°
  - éŸ³è§†é¢‘åˆå¹¶
  - è§†é¢‘è½¬ç å’Œå‹ç¼©
  - å­—å¹•çƒ§å½•
  
- âœ… åŸºç¡€è®¾ç½®ç³»ç»Ÿ
  - å†…ç½®é¢„è®¾
  - è‡ªå®šä¹‰è®¾ç½®
  - JSONå¯¼å…¥/å¯¼å‡º
  
- âœ… è¿›åº¦å’Œæ—¥å¿—
  - å®æ—¶è¿›åº¦æ˜¾ç¤º
  - åŸºæœ¬æ—¥å¿—è¾“å‡º
  
- âœ… åŸºç¡€é”™è¯¯å¤„ç†

**äº¤ä»˜ç‰©**ï¼š
- Windowså’ŒmacOSå®‰è£…åŒ…
- åŸºç¡€ç”¨æˆ·æ–‡æ¡£

### ç¬¬äºŒé˜¶æ®µï¼šåŠŸèƒ½å¢å¼º - 2ä¸ªæœˆ

**ç›®æ ‡**ï¼šå¢å¼ºç”¨æˆ·ä½“éªŒï¼Œæ·»åŠ å¸¸ç”¨åŠŸèƒ½

- ğŸ”„ ç”¨æˆ·ä½“éªŒä¼˜åŒ–
  - æ‹–æ‹½ä¸Šä¼ 
  - ä¸»é¢˜åˆ‡æ¢ï¼ˆæ·±è‰²/æµ…è‰²ï¼‰
  - å¤šè¯­è¨€æ”¯æŒï¼ˆä¸­è‹±æ–‡ï¼‰
  - é”®ç›˜å¿«æ·é”®
  
- ğŸ”„ æ‰¹é‡å¤„ç†
  - ä»»åŠ¡é˜Ÿåˆ—ç³»ç»Ÿ
  - å¹¶è¡Œå¤„ç†
  - ä»»åŠ¡ç®¡ç†ï¼ˆæš‚åœ/æ¢å¤/å–æ¶ˆï¼‰
  
- ğŸ”„ é¢„è§ˆåŠŸèƒ½
  - è§†é¢‘æ’­æ”¾å™¨é›†æˆ
  - å®æ—¶é¢„è§ˆæ•ˆæœ
  - æˆªå›¾åŠŸèƒ½
  
- ğŸ”„ è®¾ç½®ç³»ç»Ÿå¢å¼º
  - é¢„è®¾ç®¡ç†ä¼˜åŒ–
  - æœ€è¿‘ä½¿ç”¨è®°å½•
  - è®¾ç½®æœç´¢

- ğŸ”„ å­—å¹•è½¬æ¢åŠŸèƒ½ â­ æ–°å¢
  - SRTè½¬ASSè½¬æ¢å™¨
  - æ­£åˆ™æ›¿æ¢é¢„å¤„ç†
  - æ ·å¼æ¨¡æ¿ç®¡ç†
  - æ‰¹é‡è½¬æ¢æ”¯æŒ

**äº¤ä»˜ç‰©**ï¼š
- åŠŸèƒ½å¢å¼ºç‰ˆæœ¬
- ç”¨æˆ·åé¦ˆæ”¶é›†

### ç¬¬ä¸‰é˜¶æ®µï¼šé«˜çº§åŠŸèƒ½ - 2ä¸ªæœˆ

**ç›®æ ‡**ï¼šæ·»åŠ ä¸“ä¸šåŠŸèƒ½ï¼Œæå‡ç«äº‰åŠ›

- ğŸ”œ è§†é¢‘ç¼–è¾‘å·¥å…·
  - è§†é¢‘è£å‰ª/å‰ªè¾‘
  - è§†é¢‘æ—‹è½¬/ç¿»è½¬
  - æ·»åŠ æ°´å°
  - è§†é¢‘åˆ†å‰²
  - GIFç”Ÿæˆ
  
- ğŸ”œ ç¡¬ä»¶åŠ é€Ÿ
  - NVIDIA GPUåŠ é€Ÿ
  - AMD GPUåŠ é€Ÿ
  - Intel QSVåŠ é€Ÿ
  - è‡ªåŠ¨æ£€æµ‹å’Œé…ç½®
  
- ğŸ”œ éŸ³é¢‘å¤„ç†
  - éŸ³é¢‘æå–
  - éŸ³é‡è°ƒèŠ‚
  - éŸ³é¢‘æ ¼å¼è½¬æ¢
  
- ğŸ”œ é«˜çº§å­—å¹•åŠŸèƒ½
  - å­—å¹•ç¼–è¾‘å™¨
  - å¤šè¯­è¨€å­—å¹•è½¨é“
  - å­—å¹•æ ·å¼æ¨¡æ¿
  - âœ… SRTè½¬ASSè½¬æ¢ï¼ˆå·²åœ¨ç¬¬äºŒé˜¶æ®µå®Œæˆï¼‰

**äº¤ä»˜ç‰©**ï¼š
- ä¸“ä¸šç‰ˆæœ¬
- å®Œæ•´åŠŸèƒ½æ–‡æ¡£

### ç¬¬å››é˜¶æ®µï¼šå®Œå–„å’Œä¼˜åŒ– - 1-2ä¸ªæœˆ

**ç›®æ ‡**ï¼šå®Œå–„ç»†èŠ‚ï¼Œä¼˜åŒ–æ€§èƒ½

- ğŸ”œ æ€§èƒ½ä¼˜åŒ–
  - å†…å­˜ä¼˜åŒ–
  - å¤„ç†é€Ÿåº¦ä¼˜åŒ–
  - å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–
  
- ğŸ”œ ç¨³å®šæ€§å¢å¼º
  - æ–­ç‚¹ç»­ä¼ 
  - è‡ªåŠ¨é‡è¯•
  - é”™è¯¯æ¢å¤
  
- ğŸ”œ è‡ªåŠ¨æ›´æ–°
  - electron-updateré›†æˆ
  - ç‰ˆæœ¬æ£€æŸ¥
  - å¢é‡æ›´æ–°
  
- ğŸ”œ æµ‹è¯•å®Œå–„
  - å•å…ƒæµ‹è¯•è¦†ç›–
  - é›†æˆæµ‹è¯•
  - E2Eæµ‹è¯•
  
- ğŸ”œ äº‘åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰
  - è®¾ç½®äº‘åŒæ­¥
  - é¢„è®¾åˆ†äº«ç¤¾åŒº

**äº¤ä»˜ç‰©**ï¼š
- ç¨³å®šç‰ˆæœ¬ v1.0
- å®Œæ•´æµ‹è¯•æŠ¥å‘Š

### ç¬¬äº”é˜¶æ®µï¼šæ‰©å±•å’Œç”Ÿæ€ - æŒç»­

**ç›®æ ‡**ï¼šæ„å»ºç”Ÿæ€ï¼ŒæŒç»­è¿­ä»£

- ğŸ”œ æ’ä»¶ç³»ç»Ÿ
  - æ’ä»¶API
  - æ’ä»¶å¸‚åœº
  
- ğŸ”œ AIåŠŸèƒ½
  - æ™ºèƒ½å‹ç¼©å‚æ•°æ¨è
  - è§†é¢‘å†…å®¹åˆ†æ
  - è‡ªåŠ¨å­—å¹•ç”Ÿæˆ
  
- ğŸ”œ æ›´å¤šå¹³å°
  - Linuxæ”¯æŒ
  - Webç‰ˆæœ¬ï¼ˆWebAssemblyï¼‰
  
- ğŸ”œ ä¼ä¸šåŠŸèƒ½
  - æ‰¹é‡æˆæƒ
  - è‡ªå®šä¹‰å“ç‰Œ
  - APIæ¥å£

**äº¤ä»˜ç‰©**ï¼š
- æŒç»­æ›´æ–°
- ç¤¾åŒºå»ºè®¾

---

## ğŸ“ å¼€å‘è§„èŒƒ

### 1. ä»£ç è§„èŒƒ

**TypeScriptè§„èŒƒ**ï¼š
- ä¸¥æ ¼æ¨¡å¼ï¼ˆstrict: trueï¼‰
- æ˜¾å¼ç±»å‹å£°æ˜
- é¿å…ä½¿ç”¨anyç±»å‹
- ä½¿ç”¨æ¥å£å®šä¹‰æ•°æ®ç»“æ„

**å‘½åè§„èŒƒ**ï¼š
- ç»„ä»¶ï¼šPascalCaseï¼ˆå¦‚`MergeTab.tsx`ï¼‰
- å‡½æ•°å’Œå˜é‡ï¼šcamelCaseï¼ˆå¦‚`handleSubmit`ï¼‰
- å¸¸é‡ï¼šUPPER_SNAKE_CASEï¼ˆå¦‚`MAX_FILE_SIZE`ï¼‰
- ç±»å‹å’Œæ¥å£ï¼šPascalCaseï¼Œæ¥å£ä»¥Iå¼€å¤´ï¼ˆå¦‚`ITaskConfig`ï¼‰

**æ³¨é‡Šè§„èŒƒ**ï¼š
- ä½¿ç”¨JSDocæ ¼å¼
- æ¯ä¸ªå‡½æ•°å¿…é¡»æœ‰è¯´æ˜
- å¤æ‚é€»è¾‘æ·»åŠ è¡Œå†…æ³¨é‡Š
- ä½¿ç”¨è‹±æ–‡æ³¨é‡Š

**ç¤ºä¾‹**ï¼š
```typescript
/**
 * åˆå¹¶éŸ³é¢‘å’Œè§†é¢‘æ–‡ä»¶
 * @param audioPath - éŸ³é¢‘æ–‡ä»¶è·¯å¾„
 * @param videoPath - è§†é¢‘æ–‡ä»¶è·¯å¾„
 * @param outputPath - è¾“å‡ºæ–‡ä»¶è·¯å¾„
 * @param options - åˆå¹¶é€‰é¡¹
 * @returns Promise<void>
 * @throws {FileNotFoundError} å½“è¾“å…¥æ–‡ä»¶ä¸å­˜åœ¨æ—¶
 */
async function mergeAudioVideo(
  audioPath: string,
  videoPath: string,
  outputPath: string,
  options: IMergeOptions
): Promise<void> {
  // å®ç°ä»£ç 
}
```

### 2. Gitè§„èŒƒ

**åˆ†æ”¯ç­–ç•¥**ï¼š
- `main`ï¼šä¸»åˆ†æ”¯ï¼Œç¨³å®šç‰ˆæœ¬
- `develop`ï¼šå¼€å‘åˆ†æ”¯
- `feature/*`ï¼šåŠŸèƒ½åˆ†æ”¯
- `bugfix/*`ï¼šBugä¿®å¤åˆ†æ”¯
- `release/*`ï¼šå‘å¸ƒåˆ†æ”¯

**æäº¤ä¿¡æ¯æ ¼å¼**ï¼ˆConventional Commitsï¼‰ï¼š
```
<type>(<scope>): <subject>

<body>

<footer>
```

**Typeç±»å‹**ï¼š
- `feat`ï¼šæ–°åŠŸèƒ½
- `fix`ï¼šBugä¿®å¤
- `docs`ï¼šæ–‡æ¡£æ›´æ–°
- `style`ï¼šä»£ç æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œï¼‰
- `refactor`ï¼šé‡æ„
- `perf`ï¼šæ€§èƒ½ä¼˜åŒ–
- `test`ï¼šæµ‹è¯•ç›¸å…³
- `chore`ï¼šæ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

**ç¤ºä¾‹**ï¼š
```
feat(merge): æ·»åŠ éŸ³è§†é¢‘åˆå¹¶åŠŸèƒ½

- å®ç°FFmpegå‘½ä»¤ç”Ÿæˆ
- æ·»åŠ è¿›åº¦ç›‘å¬
- æ”¯æŒè‡ªå®šä¹‰ç¼–ç å‚æ•°

Closes #123
```

### 3. æµ‹è¯•è§„èŒƒ

**æµ‹è¯•è¦†ç›–ç‡è¦æ±‚**ï¼š
- æ ¸å¿ƒæ¨¡å—ï¼š> 80%
- å·¥å…·å‡½æ•°ï¼š> 90%
- UIç»„ä»¶ï¼š> 60%

**æµ‹è¯•æ–‡ä»¶å‘½å**ï¼š
- å•å…ƒæµ‹è¯•ï¼š`*.test.ts`
- é›†æˆæµ‹è¯•ï¼š`*.integration.test.ts`
- E2Eæµ‹è¯•ï¼š`*.e2e.test.ts`

**æµ‹è¯•ç»“æ„**ï¼š
```typescript
describe('FFmpegWrapper', () => {
  describe('merge', () => {
    it('åº”è¯¥æˆåŠŸåˆå¹¶éŸ³è§†é¢‘æ–‡ä»¶', async () => {
      // Arrange
      const audioPath = '/path/to/audio.mp3';
      const videoPath = '/path/to/video.mp4';
      const outputPath = '/path/to/output.mp4';
      
      // Act
      await ffmpegWrapper.merge(audioPath, videoPath, outputPath);
      
      // Assert
      expect(fs.existsSync(outputPath)).toBe(true);
    });
  });
});
```

---

## ğŸ“¦ package.json é…ç½®

```json
{
  "name": "videotool",
  "version": "1.0.0",
  "description": "å¼ºå¤§çš„è·¨å¹³å°è§†é¢‘å¤„ç†å·¥å…·",
  "main": "dist/main/index.js",
  "author": "Your Name",
  "license": "MIT",
  "scripts": {
    "dev": "concurrently \"npm run dev:renderer\" \"npm run dev:main\"",
    "dev:renderer": "vite",
    "dev:main": "electron .",
    "build": "npm run build:renderer && npm run build:main",
    "build:renderer": "vite build",
    "build:main": "tsc -p tsconfig.main.json",
    "build:mac": "electron-builder --mac",
    "build:mac:universal": "electron-builder --mac --universal",
    "build:win": "electron-builder --win",
    "build:all": "electron-builder -mw",
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    "test:e2e": "playwright test",
    "lint": "eslint src --ext .ts,.tsx",
    "lint:fix": "eslint src --ext .ts,.tsx --fix",
    "format": "prettier --write \"src/**/*.{ts,tsx,json,css,scss}\"",
    "type-check": "tsc --noEmit",
    "prepare": "husky install"
  },
  "dependencies": {
    "electron-store": "^8.1.0",
    "fluent-ffmpeg": "^2.1.2",
    "fs-extra": "^11.2.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.21.0",
    "zustand": "^4.4.7",
    "i18next": "^23.7.0",
    "react-i18next": "^14.0.0",
    "dayjs": "^1.11.10",
    "classnames": "^2.5.0",
    "react-bootstrap": "^2.9.0",
    "bootstrap": "^5.3.2",
    "react-icons": "^5.0.0",
    "video.js": "^8.6.0",
    "electron-log": "^5.0.0",
    "electron-updater": "^6.1.0"
  },
  "devDependencies": {
    "@types/node": "^20.10.0",
    "@types/react": "^18.2.0",
    "@types/react-dom": "^18.2.0",
    "@types/fluent-ffmpeg": "^2.1.24",
    "@typescript-eslint/eslint-plugin": "^6.15.0",
    "@typescript-eslint/parser": "^6.15.0",
    "@vitejs/plugin-react": "^4.2.0",
    "electron": "^28.0.0",
    "electron-builder": "^24.9.0",
    "typescript": "^5.3.0",
    "vite": "^5.0.0",
    "eslint": "^8.56.0",
    "eslint-config-prettier": "^9.1.0",
    "eslint-plugin-react": "^7.33.0",
    "eslint-plugin-react-hooks": "^4.6.0",
    "prettier": "^3.1.0",
    "jest": "^29.7.0",
    "@testing-library/react": "^14.1.0",
    "@testing-library/jest-dom": "^6.1.0",
    "@playwright/test": "^1.40.0",
    "husky": "^8.0.0",
    "lint-staged": "^15.2.0",
    "concurrently": "^8.2.0",
    "@ffmpeg-installer/ffmpeg": "^1.1.0",
    "sass": "^1.69.0"
  },
  "build": {
    "appId": "com.videotool.app",
    "productName": "VideoTool",
    "directories": {
      "output": "release"
    },
    "files": [
      "dist/**/*",
      "node_modules/**/*",
      "package.json"
    ],
    "mac": {
      "target": [
        {
          "target": "dmg",
          "arch": ["x64", "arm64", "universal"]
        }
      ],
      "category": "public.app-category.video",
      "hardenedRuntime": true,
      "gatekeeperAssess": false,
      "entitlements": "build/entitlements.mac.plist",
      "entitlementsInherit": "build/entitlements.mac.plist"
    },
    "win": {
      "target": ["nsis", "portable"],
      "arch": ["x64"]
    },
    "nsis": {
      "oneClick": false,
      "allowToChangeInstallationDirectory": true,
      "createDesktopShortcut": true,
      "createStartMenuShortcut": true
    },
    "publish": {
      "provider": "github",
      "owner": "your-username",
      "repo": "videotool"
    }
  },
  "lint-staged": {
    "*.{ts,tsx}": [
      "eslint --fix",
      "prettier --write"
    ],
    "*.{json,css,scss,md}": [
      "prettier --write"
    ]
  }
}
```

---

## ğŸ”§ é…ç½®æ–‡ä»¶

### TypeScripté…ç½®ï¼ˆtsconfig.jsonï¼‰

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "jsx": "react-jsx",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"],
      "@main/*": ["src/main/*"],
      "@renderer/*": ["src/renderer/*"],
      "@shared/*": ["src/shared/*"]
    }
  },
  "include": ["src"],
  "exclude": ["node_modules", "dist", "release"]
}
```

### ESLinté…ç½®ï¼ˆ.eslintrc.jsï¼‰

```javascript
module.exports = {
  parser: '@typescript-eslint/parser',
  extends: [
    'eslint:recommended',
    'plugin:@typescript-eslint/recommended',
    'plugin:react/recommended',
    'plugin:react-hooks/recommended',
    'prettier'
  ],
  plugins: ['@typescript-eslint', 'react', 'react-hooks'],
  env: {
    browser: true,
    node: true,
    es6: true
  },
  settings: {
    react: {
      version: 'detect'
    }
  },
  rules: {
    '@typescript-eslint/no-explicit-any': 'error',
    '@typescript-eslint/explicit-function-return-type': 'off',
    'react/react-in-jsx-scope': 'off',
    'react/prop-types': 'off'
  }
};
```

---

## ğŸ¯ æ€§èƒ½æŒ‡æ ‡

### ç›®æ ‡æ€§èƒ½æŒ‡æ ‡

- **å¯åŠ¨æ—¶é—´**ï¼š< 3ç§’ï¼ˆå†·å¯åŠ¨ï¼‰
- **UIå“åº”**ï¼š< 100ms
- **å†…å­˜å ç”¨**ï¼š< 500MBï¼ˆç©ºé—²çŠ¶æ€ï¼‰
- **å¤„ç†é€Ÿåº¦**ï¼š
  - åˆå¹¶ï¼š1-2xå®æ—¶é€Ÿåº¦
  - è½¬ç ï¼š0.5-2xå®æ—¶é€Ÿåº¦ï¼ˆå–å†³äºè®¾ç½®ï¼‰
  - å­—å¹•çƒ§å½•ï¼š0.5-1.5xå®æ—¶é€Ÿåº¦
- **æ–‡ä»¶å¤§å°**ï¼š
  - macOSï¼š< 300MBï¼ˆå«FFmpegï¼‰
  - Windowsï¼š< 250MBï¼ˆå«FFmpegï¼‰

### è´¨é‡æŒ‡æ ‡

- **å´©æºƒç‡**ï¼š< 0.1%
- **Bugå¯†åº¦**ï¼š< 1ä¸ª/KLOC
- **æµ‹è¯•è¦†ç›–ç‡**ï¼š> 70%
- **ç”¨æˆ·æ»¡æ„åº¦**ï¼š> 4.5/5.0

---

## ğŸ“„ è®¸å¯å’Œç‰ˆæƒ

### å¼€æºè®¸å¯
- **æ¨è**ï¼šMIT Licenseï¼ˆå…è®¸å•†ä¸šä½¿ç”¨ï¼‰
- **å¤‡é€‰**ï¼šGPL v3ï¼ˆè¦æ±‚å¼€æºè¡ç”Ÿä½œå“ï¼‰

### ç¬¬ä¸‰æ–¹ä¾èµ–è®¸å¯
- Electronï¼šMIT
- Reactï¼šMIT
- FFmpegï¼šLGPL/GPLï¼ˆæ³¨æ„åˆ†å‘é™åˆ¶ï¼‰
- å…¶ä»–ä¾èµ–ï¼šè§å„è‡ªè®¸å¯è¯

### æ³¨æ„äº‹é¡¹
- FFmpegä½¿ç”¨LGPLè®¸å¯ï¼ŒåŠ¨æ€é“¾æ¥å¯ç”¨äºå•†ä¸šè½¯ä»¶
- å¦‚éœ€é™æ€ç¼–è¯‘FFmpegï¼Œéœ€è€ƒè™‘GPLè®¸å¯è¦æ±‚
- æ‰€æœ‰ç¬¬ä¸‰æ–¹ä¾èµ–è®¸å¯éœ€åœ¨Abouté¡µé¢å±•ç¤º

---

## ğŸ“ æ”¯æŒå’Œè”ç³»

### æŠ€æœ¯æ”¯æŒ
- **é‚®ç®±**ï¼šsupport@videotool.com
- **GitHub Issues**ï¼šhttps://github.com/username/videotool/issues
- **æ–‡æ¡£**ï¼šhttps://videotool.com/docs

### ç¤¾åŒº
- **Discord**ï¼šhttps://discord.gg/videotool
- **è®ºå›**ï¼šhttps://forum.videotool.com
- **Twitter**ï¼š@VideoToolApp

---

## ğŸ‰ æ€»ç»“

VideoToolæ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§ã€æ˜“äºä½¿ç”¨çš„è·¨å¹³å°è§†é¢‘å¤„ç†å·¥å…·ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

âœ… **åŠŸèƒ½å®Œæ•´**ï¼šéŸ³è§†é¢‘åˆå¹¶ã€è½¬ç å‹ç¼©ã€å­—å¹•çƒ§å½•ã€**å­—å¹•æ ¼å¼è½¬æ¢**ã€æ‰¹é‡å¤„ç†ç­‰
âœ… **è·¨å¹³å°**ï¼šæ”¯æŒmacOSï¼ˆIntel/Apple Siliconï¼‰å’ŒWindows
âœ… **æ€§èƒ½ä¼˜å¼‚**ï¼šç¡¬ä»¶åŠ é€Ÿã€å¤šçº¿ç¨‹å¤„ç†
âœ… **ç”¨æˆ·å‹å¥½**ï¼šç°ä»£åŒ–UIã€å¤šè¯­è¨€ã€ä¸»é¢˜åˆ‡æ¢
âœ… **é«˜åº¦å¯å®šåˆ¶**ï¼šä¸°å¯Œçš„é¢„è®¾å’Œè‡ªå®šä¹‰é€‰é¡¹
âœ… **å­—å¹•å¤„ç†ä¸“ä¸š**ï¼šSRTè½¬ASSè½¬æ¢ã€æ­£åˆ™é¢„å¤„ç†ã€12ç§æ ·å¼æ¨¡æ¿ â­
âœ… **å®Œå…¨æœ¬åœ°åŒ–**ï¼šæ•°æ®ä¸ä¸Šä¼ ï¼Œä¿æŠ¤éšç§
âœ… **æŒç»­æ›´æ–°**ï¼šè‡ªåŠ¨æ›´æ–°ã€æ´»è·ƒå¼€å‘

### ğŸŒŸ å­—å¹•è½¬æ¢åŠŸèƒ½äº®ç‚¹

VideoToolç‹¬æœ‰çš„å­—å¹•è½¬æ¢åŠŸèƒ½ï¼Œè®©å­—å¹•å¤„ç†å˜å¾—ç®€å•é«˜æ•ˆï¼š

- ğŸ“ **æ™ºèƒ½é¢„å¤„ç†**ï¼š7æ¡å†…ç½®æ­£åˆ™è§„åˆ™ï¼Œè‡ªåŠ¨æ¸…ç†å’Œæ ¼å¼åŒ–å­—å¹•æ–‡æœ¬
- ğŸ¨ **ä¸°å¯Œæ ·å¼**ï¼š12ç§ä¸“ä¸šASSæ ·å¼æ¨¡æ¿ï¼ˆåŒè¯­ã€æ­Œè¯ã€æ¼”èŒäººå‘˜ç­‰ï¼‰
- âš¡ **æ‰¹é‡è½¬æ¢**ï¼šä¸€é”®è½¬æ¢å¤šä¸ªæ–‡ä»¶ï¼Œæé«˜å·¥ä½œæ•ˆç‡
- ğŸ‘ï¸ **å®æ—¶é¢„è§ˆ**ï¼šè½¬æ¢å‰é¢„è§ˆæ•ˆæœï¼Œç¡®ä¿ç»“æœç¬¦åˆé¢„æœŸ
- ğŸ”§ **é«˜åº¦çµæ´»**ï¼šè‡ªå®šä¹‰æ­£åˆ™è§„åˆ™ã€å¯¼å…¥æ ·å¼æ¨¡æ¿ã€è°ƒæ•´å‚æ•°
- ğŸ’¾ **é…ç½®ç®¡ç†**ï¼šä¿å­˜å¸¸ç”¨è®¾ç½®ï¼Œä¸€é”®åº”ç”¨

é€šè¿‡éµå¾ªæœ¬æ–‡æ¡£çš„è§„æ ¼è¯´æ˜ï¼Œå¯ä»¥å¼€å‘å‡ºä¸€æ¬¾ä¸“ä¸šçº§çš„è§†é¢‘å¤„ç†å·¥å…·ï¼

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv2.1 â­ æ–°å¢å­—å¹•è½¬æ¢åŠŸèƒ½  
**æœ€åæ›´æ–°**ï¼š2025-10-26  
**ç»´æŠ¤è€…**ï¼šVideoToolå¼€å‘å›¢é˜Ÿ

