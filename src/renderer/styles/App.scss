@use './tokens' as t;

/* ============================================
   App.scss - 应用布局和侧边栏样式
   
   职责：
   1. 应用级布局（.app, .main-content）
   2. 左右分栏布局（.sidebar-col, .content-col）
   3. 侧边栏样式（.sidebar）
   
   注意：
   - 全局重置样式在 global.scss 中
   - 各个功能页面的样式在各自的 .module.scss 中
   - 通用组件样式在 styles/components/ 目录中
   ============================================ */

// ========================================
// 应用级布局
// ========================================
.app {
  height: 100vh;
  width: 100vw;
  background-color: var(--vt-color-bg);
  color: var(--vt-color-text-primary);
  overflow: hidden;
  font-size: 1rem;
  margin: 0;
  padding: 0;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  transition: background-color var(--vt-motion-duration-normal), 
              color var(--vt-motion-duration-normal);
}

.main-content {
  height: 100vh;
  padding: 0;
  margin: 0;
  
  .row {
    margin: 0;
    height: 100%;
  }
}

// ========================================
// 左右分栏布局
// ========================================
.sidebar-col {
  width: 180px;
  background-color: var(--vt-color-surface); // 与右侧内容区保持一致 ✅
  border-right: 1px solid var(--vt-color-border);
  overflow: hidden;
  height: 100vh;
  padding: 0 !important;
  margin: 0 !important;
}

.content-col {
  flex: 1;
  background-color: var(--vt-color-surface); // 页面背景（浅灰/深灰），与卡片区分 ✅
  overflow: hidden;
  height: 100vh;
  padding: 0 !important;
  margin: 0 !important;
}

// ========================================
// 侧边栏样式
// ========================================
.sidebar {
  height: 100vh;
  padding: 0;
  margin: 0;
  
  // Logo 区域
  .sidebar-logo {
    padding: 46px 16px 16px 16px; // 优化左右对称，底部增加 ✅
    display: flex;
    align-items: center;
    gap: 10px;
    border-bottom: 1px solid var(--vt-color-border);
    margin: 0;
    margin-bottom: 12px; // 增加到 12px，与第一个菜单项间距更合理 ✅
    -webkit-app-region: drag; // 允许拖动窗口
    user-select: none;
    
    img {
      width: 32px;
      height: 32px;
      object-fit: contain;
    }
    
    .logo-text {
      font-size: 20px;
      font-weight: 700;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: 0.5px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }
  }
  
  // 导航项 - macOS 风格：左侧指示条 + 浅色背景 ✅
  .sidebar-item {
    width: calc(100% - 16px); // 左右各留 8px 间距 ✅
    display: flex;
    align-items: center;
    justify-content: center; // 文字居中对齐 ✅
    padding: 11px 16px; // 稍微增加上下 padding，更舒适 ✅
    margin: 0 8px 4px 8px; // 底部间距增加到 4px，更透气 ✅
    border-radius: 6px; // 圆角 6px，精致感 ✅
    border: none;
    background-color: transparent;
    cursor: pointer;
    transition: all 0.15s ease; // 缩短动画时间，更灵敏 ✅
    color: var(--vt-color-text-secondary); // 使用主题变量 ✅
    text-decoration: none;
    font-size: 16px; // 更大的字体 ✅
    font-weight: 500; // 加粗字重 ✅
    line-height: 1.2; // 统一行高 ✅
    text-align: left;
    position: relative; // 为左侧指示条定位 ✅
    
    &:hover {
      background-color: color-mix(in srgb, var(--vt-color-text-primary) 5%, transparent) !important; // 使用主题变量 ✅
      color: var(--vt-color-text-primary) !important;
    }
    
    // 激活状态 - 浅蓝色背景 + 蓝色文字 + 左侧指示条 ✅
    &.active {
      background-color: rgba(102, 126, 234, 0.12) !important; // 浅蓝色背景 ✅
      color: var(--vt-color-brand-primary) !important; // 蓝色文字 ✅
      font-weight: 600; // 激活状态更粗 ✅
      
      // 左侧蓝色指示条 ✅
      &::before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 3.5px; // 稍微加粗到 3.5px ✅
        height: 70%; // 增加高度到 70% ✅
        background-color: var(--vt-color-brand-primary);
        border-radius: 0 2px 2px 0;
      }
      
      &:hover {
        background-color: rgba(102, 126, 234, 0.18) !important; // hover 时稍微深一点 ✅
        color: var(--vt-color-brand-primary) !important;
      }
    }
    
    svg {
      font-size: 16px;
    }
  }
  
  // 分隔线样式 ✅
  .sidebar-divider {
    border: none;
    height: 1px;
    background-color: var(--vt-color-border);
    margin: 12px 8px; // 上下 12px，左右 8px 与菜单项对齐 ✅
    opacity: 0.6; // 稍微淡化，不要太突兀 ✅
  }
}
