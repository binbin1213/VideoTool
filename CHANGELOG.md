# 更新日志

## [v1.3.0] - 2025-11-03

### ✨ 新功能

#### 🎬 电影级字幕样式系统 (v3.0)
- **新增电影字幕样式系列**：全新设计的 Netflix/Disney+ 风格字幕样式
  - 采用微黄白色主题（`#F0FFFE`），更加温暖柔和
  - 精致阴影效果，增强可读性
  - 优化字体间距和边距，提升观看体验
  - 完美适配 1080p 和 4K 分辨率

#### 📝 智能注释处理
- **自动识别字幕注释**：系统自动检测 `（注：xxx）` 格式的注释内容
- **智能样式应用**：注释自动应用专属样式
  - 字号缩小（1080p: 55pt，4K: 110pt）
  - 浅灰色显示（`#CCCCCC`）
  - 斜体效果
  - 位置微调，避免与正文重叠
- **混合内容支持**：正确处理注释与正文混排的字幕
- **双端同步**：前后端转换逻辑保持一致

### 🎨 样式优化

#### 电影字幕样式参数
- **字体颜色**：`&H00F0FFFE`（微黄白色）
- **描边**：`0.5pt`（精细描边，不抢眼）
- **阴影**：`3pt`（深度适中，立体感强）
- **字体间距**：`2pt`（舒适阅读间距）
- **底部边距**：`30px`（1080p）/ `60px`（4K）

#### 注释样式参数
- **字体大小**：`55pt`（1080p）/ `110pt`（4K）
- **字体颜色**：`&H00CCCCCC`（浅灰色）
- **斜体**：启用
- **底部边距**：`35px`（1080p）/ `70px`（4K）

### 📋 模板更新

#### 1080p 模板 (`subtitle-styles.template.ass`)
- 更新所有样式为电影级参数
- 重命名样式系列：`译文字幕` → `电影字幕`
- 新增注释专用样式：`电影字幕 注释底部`、`电影字幕 注释顶部`

#### 4K 模板 (`subtitle-styles.template.4k.ass`)
- 同步更新所有样式
- 参数按比例放大（Outline x2, Shadow x2, MarginV x2）
- 保持视觉效果与 1080p 一致

### 🔧 技术改进

#### 代码优化
- **前端** (`src/renderer/utils/subtitleConverter.ts`)
  - 新增 `applyAnnotationStyles()` 函数
  - 智能检测并处理注释标记
  - 动态适配分辨率
  
- **后端** (`src/main/utils/subtitle/ASSGenerator.ts`)
  - 集成注释处理到 `escapeText()` 方法
  - 保持与前端逻辑一致
  - 优化代码质量

#### 正则表达式
- 注释匹配模式：`/([（(]注[：:][^）)]+[）)])/g`
- 支持全角和半角括号
- 支持全角和半角冒号

### 📄 文档更新
- 更新模板文件版本信息
- 添加样式特点说明
- 完善代码注释

### 🐛 Bug 修复
- 修复 TypeScript 未使用参数警告
- 修复样式名称不一致导致的显示问题
- 修复颜色格式错误

### 🎯 影响范围
- ✅ 字幕转换功能（SRT → ASS）
- ✅ 样式模板应用
- ✅ 1080p 和 4K 分辨率支持
- ✅ 前后端转换逻辑

---

## [v1.2.0] - 之前版本
（之前的版本历史...）

---

**完整更新详情**：请查看 [GitHub Releases](https://github.com/binbin1213/VideoTool/releases)

**反馈问题**：[GitHub Issues](https://github.com/binbin1213/VideoTool/issues)

