# VideoTool v1.1.0-dev 发布说明

> 🎉 **开发预览版** - 2025年10月31日

这是 VideoTool 的第一个功能增强版本，专注于字幕处理功能的全面升级。

## 🌟 主要亮点

### 1. 多轨道字幕封装 🎬
软字幕模式现在支持同时封装多个语言字幕轨道！

**主要特性：**
- 📚 无限数量字幕轨道支持
- 🌍 自动识别13种常见语言代码
- 🏷️ 自动设置字幕元数据（语言标签和显示名称）
- ⚡ 视频/音频直接复制，处理速度极快
- 📦 MKV 容器格式输出

**使用方法：**
1. 在字幕烧录页面选择"软字幕（封装）"模式
2. 选择视频文件
3. 点击"选择字幕文件"，可多选（支持 Ctrl/Cmd + 点击）
4. 确保字幕文件名包含语言代码，如：
   - `video.zh-Hans.srt` （简体中文）
   - `video.en.srt` （英语）
   - `video.ja.srt` （日语）
5. 点击"开始封装"，输出为 MKV 文件

**效果演示：**
播放器中可以自由切换字幕语言，如下图所示：
![字幕轨道选择](docs/screenshots/subtitle-tracks.png)

---

### 2. 字幕批量转换 📦
一次性转换多个 SRT 文件为 ASS 格式，大大提升工作效率！

**主要特性：**
- ✅ 批量模式开关
- 📁 多文件选择（支持 Ctrl/Cmd + 点击或拖拽）
- 📊 实时进度显示
- 💾 后端直接保存，无浏览器下载限制
- 🔄 保留原文件名和语言代码

**使用方法：**
1. 在字幕转换页面开启"批量转换模式"
2. 选择多个 SRT 文件
3. 配置样式和参数
4. 点击"开始批量转换"
5. 选择保存目录
6. 等待转换完成

**注意事项：**
- 所有文件将应用相同的样式和参数
- 转换后的文件名保持原有语言代码
- 失败的文件会在日志中显示详细错误信息

---

### 3. ASS 样式编辑器 🎨
可视化编辑 ASS 字幕样式，告别复杂的样式代码！

**主要特性：**
- 🖌️ 6个核心参数可调（字体、大小、颜色、描边、对齐、底部边距）
- 👁️ 实时预览效果
- 💾 保存自定义预设
- 📋 预设样式和自定义样式分组管理
- 🎨 描边颜色独立控制

**可编辑参数：**
1. **字体名称** - 下拉选择常见中英文字体
2. **字体大小** - 10-36px
3. **文字颜色** - 11种预设颜色
4. **描边宽度** - 0-3px
5. **描边颜色** - 黑色/灰色/白色
6. **对齐方式** - 左下/底部居中/右下
7. **底部边距** - 0-50px

**使用方法：**
1. 在字幕转换页面选择一个样式
2. 点击"编辑"按钮
3. 在弹出的编辑器中调整参数
4. 查看实时预览效果
5. 输入自定义名称并保存

---

### 4. 字幕水印功能 🔖
在 ASS 字幕中添加文字水印，保护您的字幕作品！

**主要特性：**
- ✍️ 自定义水印文字
- 📍 可选位置（顶部/中间/底部）
- 🎨 独立水印样式
- 👁️ 实时预览效果

**使用方法：**
1. 在字幕转换页面勾选"启用水印"
2. 输入水印文字
3. 选择水印位置
4. 在预览区查看效果
5. 开始转换

---

## 🔧 改进优化

### UI/UX 优化
- ✨ 统一表单元素对齐，视觉更整洁
- 🎴 卡片式文件信息展示，信息更清晰
- 🔘 优化"浏览"按钮设计（字体、颜色、边框）
- 💡 为表单控件添加帮助文本
- 🏷️ 软字幕文件显示为带语言标签的徽章

### 后端增强
- ⚙️ `FFmpegService.embedSoftSubtitles` 支持字幕数组
- 🔄 动态生成多个字幕流的 FFmpeg 命令
- 🏷️ 自动为每个字幕流设置元数据
- 📁 输出路径选择支持更多格式（MKV/AVI/MOV）

---

## 🐛 Bug 修复

- ✅ 修复批量转换只保存一个文件的问题
- ✅ 修复软字幕封装按钮禁用状态判断错误
- ✅ 修复输出文件扩展名不正确的问题
- ✅ 修复"浏览"按钮文字溢出和垂直显示问题
- ✅ 修复表单元素对齐不一致的问题
- ✅ 修复字幕选择区域滚动显示问题

---

## 📦 技术细节

### 新增文件
```
src/main/ipc/subtitle-convert.handlers.ts        # 字幕转换后端处理
src/renderer/styles/components/FormControls.module.scss  # 统一表单样式
```

### 主要修改
```
src/main/services/FFmpegService.ts               # 多轨道封装支持
src/main/ipc/merge.handlers.ts                   # 输出格式扩展
src/renderer/utils/subtitleConverter.ts          # 样式管理、水印支持
src/renderer/components/Features/SubtitleBurnTab.tsx     # 多文件UI
src/renderer/components/Features/SubtitleConvertTab.tsx  # 批量转换、编辑器
```

### 技术栈
- Electron 34
- React 18.3
- TypeScript 5.7
- FFmpeg (fluent-ffmpeg)
- React Bootstrap 2
- Bootstrap 5

---

## 🚀 安装和使用

### 下载
访问 [GitHub Releases](https://github.com/binbin1213/VideoTool/releases/tag/v1.1.0-dev) 下载对应平台的安装包：

- **macOS**: `VideoTool-1.1.0-dev-arm64.dmg` (Apple Silicon) 或 `VideoTool-1.1.0-dev-x64.dmg` (Intel)
- **Windows**: `VideoTool-Setup-1.1.0-dev.exe` (安装版) 或 `VideoTool-1.1.0-dev-Portable.exe` (便携版)

### 系统要求
- **macOS**: 10.15 (Catalina) 或更高
- **Windows**: Windows 10 (1809) 或更高
- **内存**: 建议 4GB 以上
- **磁盘**: 500MB 可用空间

---

## ⚠️ 已知问题

1. **开发版本标识**: 这是开发预览版，可能存在未发现的bug
2. **性能优化**: 大量字幕轨道（>20个）的封装性能尚未优化
3. **样式预览**: 预览效果可能与实际播放略有差异

---

## 📝 升级说明

### 从 v1.0.0 升级
1. 下载新版本安装包
2. 直接安装覆盖旧版本（会保留设置和自定义预设）
3. 首次运行时可能需要重新下载 FFmpeg

### 配置迁移
- 自定义 ASS 样式预设保存在 `localStorage`，升级后会自动保留
- 应用设置保存在用户数据目录，升级后会自动保留

---

## 🤝 反馈和建议

如果您在使用过程中遇到问题或有任何建议，请通过以下方式反馈：

- **GitHub Issues**: https://github.com/binbin1213/VideoTool/issues
- **Email**: piaozhitian@gmail.com

---

## 🙏 致谢

感谢所有测试用户的反馈和建议，您的支持是我们前进的动力！

---

## 📅 下一步计划

v1.2.0 将专注于：
- 🎬 视频转码/压缩功能
- 🔄 批量处理队列系统
- ✂️ 视频编辑工具（裁剪、旋转、水印）
- 🌐 多语言界面支持

敬请期待！

---

**VideoTool 开发团队**  
2025年10月31日

